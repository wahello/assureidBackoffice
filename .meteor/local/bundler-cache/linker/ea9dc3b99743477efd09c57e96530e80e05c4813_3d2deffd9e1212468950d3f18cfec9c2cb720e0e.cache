[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Template = Package['templating-runtime'].Template;\nvar ReactiveVar = Package['reactive-var'].ReactiveVar;\nvar _ = Package.underscore._;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar GoogleMaps;\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                             //\n// packages/dburles_google-maps/template.google-maps.js                                        //\n//                                                                                             //\n/////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                               //\n                                                                                               // 1\nTemplate.__checkName(\"googleMap\");                                                             // 2\nTemplate[\"googleMap\"] = new Template(\"Template.googleMap\", (function() {                       // 3\n  var view = this;                                                                             // 4\n  return HTML.Raw('<div class=\"map-canvas\" style=\"width: 100%; height: 100%\"></div>');         // 5\n}));                                                                                           // 6\n                                                                                               // 7\n/////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                             //\n// packages/dburles_google-maps/google-maps.js                                                 //\n//                                                                                             //\n/////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                               //\nvar supportedTypes = ['Map', 'StreetViewPanorama'];                                            // 1\n                                                                                               // 2\nGoogleMaps = {                                                                                 // 3\n  load: _.once(function(options) {                                                             // 4\n    options = _.extend({ v: '3.exp' }, options);                                               // 5\n    var params = _.map(options, function(value, key) { return key + '=' + value; }).join('&');\n    var script = document.createElement('script');                                             // 7\n    script.type = 'text/javascript';                                                           // 8\n    script.src = 'https://maps.googleapis.com/maps/api/js?' + params +                         // 9\n      '&callback=GoogleMaps.initialize';                                                       // 10\n                                                                                               // 11\n    document.body.appendChild(script);                                                         // 12\n  }),                                                                                          // 13\n  utilityLibraries: [],                                                                        // 14\n  loadUtilityLibrary: function(path) {                                                         // 15\n    this.utilityLibraries.push(path);                                                          // 16\n  },                                                                                           // 17\n  _loaded: new ReactiveVar(false),                                                             // 18\n  loaded: function() {                                                                         // 19\n    return this._loaded.get();                                                                 // 20\n  },                                                                                           // 21\n  maps: {},                                                                                    // 22\n  _callbacks: {},                                                                              // 23\n  initialize: function() {                                                                     // 24\n    this._loaded.set(true);                                                                    // 25\n    _.each(this.utilityLibraries, function(path) {                                             // 26\n      var script = document.createElement('script');                                           // 27\n      script.type = 'text/javascript';                                                         // 28\n      script.src = path;                                                                       // 29\n                                                                                               // 30\n      document.body.appendChild(script);                                                       // 31\n    });                                                                                        // 32\n  },                                                                                           // 33\n  _ready: function(name, map) {                                                                // 34\n    _.each(this._callbacks[name], function(cb) {                                               // 35\n      if (_.isFunction(cb)) {                                                                  // 36\n        cb(map);                                                                               // 37\n      }                                                                                        // 38\n    });                                                                                        // 39\n  },                                                                                           // 40\n  ready: function(name, cb) {                                                                  // 41\n    if (! this._callbacks[name]) {                                                             // 42\n      this._callbacks[name] = [];                                                              // 43\n    }                                                                                          // 44\n    // make sure we run the callback only once                                                 // 45\n    // as the tilesloaded event will also run after initial load                               // 46\n    this._callbacks[name].push(_.once(cb));                                                    // 47\n  },                                                                                           // 48\n  // options: function(options) {                                                              // 49\n  //   var self = this;                                                                        // 50\n  //   return function() {                                                                     // 51\n  //     if (self.loaded())                                                                    // 52\n  //       return options();                                                                   // 53\n  //   };                                                                                      // 54\n  // },                                                                                        // 55\n  get: function(name) {                                                                        // 56\n    return this.maps[name];                                                                    // 57\n  },                                                                                           // 58\n  _create: function(name, options) {                                                           // 59\n    var self = this;                                                                           // 60\n    self.maps[name] = {                                                                        // 61\n      instance: options.instance,                                                              // 62\n      options: options.options                                                                 // 63\n    };                                                                                         // 64\n                                                                                               // 65\n    if (options.type === 'StreetViewPanorama') {                                               // 66\n      options.instance.setVisible(true);                                                       // 67\n      self._ready(name, self.maps[name]);                                                      // 68\n    } else {                                                                                   // 69\n      google.maps.event.addListener(options.instance, 'tilesloaded', function() {              // 70\n        self._ready(name, self.maps[name]);                                                    // 71\n      });                                                                                      // 72\n    }                                                                                          // 73\n  },                                                                                           // 74\n  create: function(options) {                                                                  // 75\n    // default to Map                                                                          // 76\n    var type = options.type ? options.type : 'Map';                                            // 77\n    if (! _.include(supportedTypes, type)) {                                                   // 78\n      throw new Meteor.Error(\"GoogleMaps - Invalid type argument: \" + type);                   // 79\n    }                                                                                          // 80\n                                                                                               // 81\n    this._create(options.name, {                                                               // 82\n      type: type,                                                                              // 83\n      instance: new google.maps[type](options.element, options.options),                       // 84\n      options: options.options                                                                 // 85\n    });                                                                                        // 86\n  }                                                                                            // 87\n};                                                                                             // 88\n                                                                                               // 89\nTemplate.googleMap.onRendered(function() {                                                     // 90\n  var self = this;                                                                             // 91\n  self.autorun(function(c) {                                                                   // 92\n    // if the api has loaded                                                                   // 93\n    if (GoogleMaps.loaded()) {                                                                 // 94\n      var data = Template.currentData();                                                       // 95\n                                                                                               // 96\n      if (! data.options) {                                                                    // 97\n        return;                                                                                // 98\n      }                                                                                        // 99\n      if (! data.name) {                                                                       // 100\n        throw new Meteor.Error(\"GoogleMaps - Missing argument: name\");                         // 101\n      }                                                                                        // 102\n                                                                                               // 103\n      self._name = data.name;                                                                  // 104\n                                                                                               // 105\n      var canvas = self.$('.map-canvas').get(0);                                               // 106\n                                                                                               // 107\n      GoogleMaps.create({                                                                      // 108\n        name: data.name,                                                                       // 109\n        type: data.type,                                                                       // 110\n        element: canvas,                                                                       // 111\n        options: data.options                                                                  // 112\n      });                                                                                      // 113\n                                                                                               // 114\n      c.stop();                                                                                // 115\n    }                                                                                          // 116\n  });                                                                                          // 117\n});                                                                                            // 118\n                                                                                               // 119\nTemplate.googleMap.onDestroyed(function() {                                                    // 120\n  if (GoogleMaps[this._name]) {                                                                // 121\n    google.maps.event.clearInstanceListeners(GoogleMaps.maps[this._name].instance);            // 122\n    delete GoogleMaps.maps[this._name];                                                        // 123\n  }                                                                                            // 124\n});                                                                                            // 125\n                                                                                               // 126\n/////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\n(function (pkg, symbols) {\n  for (var s in symbols)\n    (s in pkg) || (pkg[s] = symbols[s]);\n})(Package['dburles:google-maps'] = {}, {\n  GoogleMaps: GoogleMaps\n});\n\n})();\n","servePath":"/packages/dburles_google-maps.js"}]