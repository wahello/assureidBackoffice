{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-dom","imported":["render"],"specifiers":[{"kind":"named","imported":"render","local":"render"}]},{"source":"meteor/ultimatejs:tracker-react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TrackerReact"}]},{"source":"meteor/react-meteor-data","imported":["createContainer"],"specifiers":[{"kind":"named","imported":"createContainer","local":"createContainer"}]},{"source":"../api/NotificationTemplate.js","imported":["NotificationTemplate"],"specifiers":[{"kind":"named","imported":"NotificationTemplate","local":"NotificationTemplate"}]}],"exports":{"exported":["BroadcastTemplate"],"specifiers":[{"kind":"local","local":"BroadcastTemplate","exported":"default"}]}}},"options":{"filename":"imports/dashboard/notification/components/BroadcastTemplate.jsx","filenameRelative":"imports/dashboard/notification/components/BroadcastTemplate.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/notification/components/BroadcastTemplate.jsx.map","sourceFileName":"imports/dashboard/notification/components/BroadcastTemplate.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"BroadcastTemplate"},"ignored":false,"code":"module.export({\n\tdefault: () => BroadcastTemplate\n});\nlet React, Component;\nmodule.watch(require(\"react\"), {\n\tdefault(v) {\n\t\tReact = v;\n\t},\n\n\tComponent(v) {\n\t\tComponent = v;\n\t}\n\n}, 0);\nlet render;\nmodule.watch(require(\"react-dom\"), {\n\trender(v) {\n\t\trender = v;\n\t}\n\n}, 1);\nlet TrackerReact;\nmodule.watch(require(\"meteor/ultimatejs:tracker-react\"), {\n\tdefault(v) {\n\t\tTrackerReact = v;\n\t}\n\n}, 2);\nlet createContainer;\nmodule.watch(require(\"meteor/react-meteor-data\"), {\n\tcreateContainer(v) {\n\t\tcreateContainer = v;\n\t}\n\n}, 3);\nlet NotificationTemplate;\nmodule.watch(require(\"../api/NotificationTemplate.js\"), {\n\tNotificationTemplate(v) {\n\t\tNotificationTemplate = v;\n\t}\n\n}, 4);\n\nclass BroadcastTemplate extends TrackerReact(Component) {\n\tcomponentDidMount() {\n\t\trenderFunction();\n\t\t$(document).ready(function () {\n\t\t\t$('#sendmessageContent').summernote({\n\t\t\t\theight: 190,\n\t\t\t\tmaxHeight: 190,\n\t\t\t\tminHeight: 175\n\t\t\t});\n\t\t});\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tsubscription: {\n\t\t\t\t\"userfunction\": Meteor.subscribe(\"userfunction\")\n\t\t\t}\n\t\t};\n\t}\n\n\tsendTemplate(event) {\n\t\tevent.preventDefault();\n\t\tvar templateType = this.refs.templateType.value;\n\t\tvar subject = this.refs.subject.value;\n\t\tvar body = $('#sendmessageContent').summernote('code');\n\t\tvar toVar = $('.sendTo').val();\n\t\tvar fromuser = 'support@spotyl.com';\n\t\tvar splitTo = toVar.split(',');\n\n\t\tfor (i = 0; i < splitTo.length; i++) {\n\t\t\tvar to = splitTo[i];\n\n\t\t\tif (templateType == 'Email') {\n\t\t\t\tMeteor.call('sendEmailnNotification', to, fromuser, subject, body);\n\t\t\t} else if (templateType == 'SMS') {\n\t\t\t\tMeteor.call('sendSMS', to, body);\n\t\t\t} else {\n\t\t\t\tMeteor.call('insertNotification', \"\", \"\", to, body);\n\t\t\t}\n\t\t} //i\t\n\n\n\t\t$('.sendTo').val('');\n\t\t$('.subject').val('');\n\t\t$('#sendmessageContent').val('');\n\t}\n\n\tselectType(event) {\n\t\tevent.preventDefault();\n\n\t\tif (this.refs.templateType.value == 'Notification') {\n\t\t\t$('.subjectRow').css({\n\t\t\t\t'display': 'none'\n\t\t\t});\n\t\t\tvar userData = Meteor.users.find({}).fetch();\n\t\t\tvar idArray = [];\n\n\t\t\tif (userData) {\n\t\t\t\tfor (var i = 0; i < userData.length; i++) {\n\t\t\t\t\tvar id = userData[i]._id;\n\t\t\t\t\tidArray.push(id);\n\t\t\t\t\tvar value = idArray.join();\n\t\t\t\t\t$('.sendTo').val(value);\n\t\t\t\t} //i\n\n\t\t\t} //userData\n\n\t\t} else if (this.refs.templateType.value == 'SMS') {\n\t\t\t$('.subjectRow').css({\n\t\t\t\t'display': 'none'\n\t\t\t});\n\t\t\tvar userData = Meteor.users.find({}).fetch();\n\t\t\tvar numberArray = [];\n\n\t\t\tif (userData) {\n\t\t\t\tfor (var i = 0; i < userData.length; i++) {\n\t\t\t\t\tif (userData[i].profile) {\n\t\t\t\t\t\tvar mobileno = userData[i].profile.mobNumber;\n\t\t\t\t\t\tnumberArray.push(mobileno);\n\t\t\t\t\t\tvar value = numberArray.join();\n\t\t\t\t\t\t$('.sendTo').val(value);\n\t\t\t\t\t}\n\t\t\t\t} //i\n\n\t\t\t} //userData\n\n\t\t} else {\n\t\t\t$('.subjectRow').css({\n\t\t\t\t'display': 'block'\n\t\t\t});\n\t\t\tvar userData = Meteor.users.find({}).fetch();\n\t\t\tvar emailArray = [];\n\n\t\t\tif (userData) {\n\t\t\t\tfor (var i = 0; i < userData.length; i++) {\n\t\t\t\t\tvar email = userData[i].emails[0].address;\n\t\t\t\t\temailArray.push(email);\n\t\t\t\t\tvar value = emailArray.join();\n\t\t\t\t\t$('.sendTo').val(value);\n\t\t\t\t} //i\n\n\t\t\t} //userData\n\n\t\t}\n\t}\n\n\trender() {\n\t\treturn React.createElement(\n\t\t\t\"section\",\n\t\t\t{\n\t\t\t\tclassName: \"NotificationContent\"\n\t\t\t},\n\t\t\tReact.createElement(\n\t\t\t\t\"div\",\n\t\t\t\t{\n\t\t\t\t\tclassName: \"row\"\n\t\t\t\t},\n\t\t\t\tReact.createElement(\n\t\t\t\t\t\"div\",\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: \"col-lg-12 col-md-10 col-sm-12 col-xs-12 \"\n\t\t\t\t\t},\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: \"box box-primary\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: \"box-header with-border\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"h3\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName: \"box-title\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"BROADCAST TEMPLATE\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: \"box-body\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"form\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName: \"newTemplateForm\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: \"row\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-6 col-md-6 col-sm-12 col-xs-12\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"form-group\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-6 label-category\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\"Template Type\",\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"astrick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"*\"\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\":\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\"select\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"form-control templateType\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"templateType\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tref: \"templateType\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange: this.selectType.bind(this)\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"option\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\" -- Select --\"\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"option\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\" Email \"\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"option\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\" Notification \"\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"option\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\" SMS \"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: \"row inputrow\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"form-group\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 label-category\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\"Send To\",\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"astrick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"*\"\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\":\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\tref: \"sendTo\",\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"sendTo\",\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"sendTo col-lg-12 col-md-12 col-sm-12 col-xs-12 inputValid\"\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: \"row inputrow subjectRow\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"form-group subjectDiv\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 label-category\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\"Subject\",\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"astrick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"*\"\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\":\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\tref: \"subject\",\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"subject\",\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"subject col-lg-12 col-md-12 col-sm-12 col-xs-12 inputValid\"\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: \"row inputrow\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"form-group\"\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 label-category\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\"Message\",\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"astrick\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"*\"\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\":\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\"\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tReact.createElement(\"div\", {\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: \"sendmessageContent\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"content\"\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclassName: \"savetemp col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\t\t\"button\",\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tonClick: this.sendTemplate.bind(this),\n\t\t\t\t\t\t\t\t\t\t\ttype: \"submit\",\n\t\t\t\t\t\t\t\t\t\t\tclassName: \"col-lg-2 col-md-3 col-sm-6 col-xs-12 btn btn-primary pull-right sendtxtmsgbtn\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\"Send\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n\n}","map":{"version":3,"sources":["imports/dashboard/notification/components/BroadcastTemplate.jsx"],"names":["module","export","default","BroadcastTemplate","React","Component","watch","require","v","render","TrackerReact","createContainer","NotificationTemplate","componentDidMount","renderFunction","$","document","ready","summernote","height","maxHeight","minHeight","constructor","state","subscription","Meteor","subscribe","sendTemplate","event","preventDefault","templateType","refs","value","subject","body","toVar","val","fromuser","splitTo","split","i","length","to","call","selectType","css","userData","users","find","fetch","idArray","id","_id","push","join","numberArray","profile","mobileno","mobNumber","emailArray","email","emails","address","bind"],"mappings":"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","file":"imports/dashboard/notification/components/BroadcastTemplate.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport TrackerReact from 'meteor/ultimatejs:tracker-react';\nimport {createContainer} from 'meteor/react-meteor-data';\n\nimport { NotificationTemplate } from '../api/NotificationTemplate.js';\n\nexport default class BroadcastTemplate extends TrackerReact(Component) {\n\n\tcomponentDidMount(){\n\n\t\trenderFunction();\n\n\t\t$(document).ready(function() {\n\n\t\t  $('#sendmessageContent').summernote({\n\t        height: 190,\n\t        maxHeight:190,\n\t        minHeight:175,\n\t    \t});\n\t\t});\t\t\n\n\t}\n\n\tconstructor() {\n\t  super();\n\t  this.state = {\n\t    subscription: {\n\t      \"userfunction\": Meteor.subscribe(\"userfunction\")\n\t    }\n\t  }\n\t}\n\n\tsendTemplate(event){\n\t\tevent.preventDefault();\n\t\tvar templateType     = this.refs.templateType.value;\n\t\tvar subject          = this.refs.subject.value;\n\t\tvar body             = $('#sendmessageContent').summernote('code');\n\t\tvar toVar            = $('.sendTo').val();\n\t\tvar fromuser  = 'support@spotyl.com';\n\t\tvar splitTo = toVar.split(',');\n\t\tfor(i=0 ; i<splitTo.length ; i++){\n\t\t\tvar to = splitTo[i];\n\t\t\tif(templateType == 'Email'){\n\t\t\t\tMeteor.call('sendEmailnNotification',to , fromuser, subject ,body);\n\t\t\t}else if(templateType == 'SMS'){\n\t\t\t\tMeteor.call('sendSMS',to,body);\n\t\t\t}else{\n\t\t\t\tMeteor.call('insertNotification',\"\",\"\",to,body);\n\t\t\t}\n\t\t}//i\t\n\t\t\n\t\t$('.sendTo').val('');\n\t\t$('.subject').val('');\n\t\t$('#sendmessageContent').val('');\n\t\t\n\n        \n\t}\n\n\n\tselectType(event){\n\t\tevent.preventDefault();\n\t\tif(this.refs.templateType.value  == 'Notification'){\n\t\t\t$('.subjectRow').css({'display':'none'});\n\t\t\tvar userData = Meteor.users.find({}).fetch();\n\t\t\tvar idArray = [];\n\t\t\tif(userData){\n\t\t\t\tfor(var i=0 ; i<userData.length ; i++){\n\t\t\t\t\tvar id = userData[i]._id;\n\t\t\t\t\tidArray.push(id);\n\t\t\t\t\tvar value = idArray.join();\n\t\t\t\t\t$('.sendTo').val(value);\n\t\t\t\t}//i\n\t\t\t}//userData\n\n\t\t}else if(this.refs.templateType.value  == 'SMS'){\n\t\t\t$('.subjectRow').css({'display':'none'});\n\t\t\tvar userData = Meteor.users.find({}).fetch();\n\t\t\tvar numberArray = [];\n\t\t\tif(userData){\n\t\t\t\tfor(var i=0 ; i<userData.length ; i++){\n\t\t\t\t\tif(userData[i].profile){\n\t\t\t\t\t\tvar mobileno = userData[i].profile.mobNumber;\n\t\t\t\t\t\tnumberArray.push(mobileno);\n\t\t\t\t\t\tvar value = numberArray.join();\n\t\t\t\t\t\t$('.sendTo').val(value);\n\t\t\t\t\t}\n\t\t\t\t}//i\n\t\t\t}//userData\n\t\t}else{\n\t\t\t$('.subjectRow').css({'display':'block'});\n\t\t\tvar userData = Meteor.users.find({}).fetch();\n\t\t\tvar emailArray = [];\n\t\t\tif(userData){\n\t\t\t\tfor(var i=0 ; i<userData.length ; i++){\n\t\t\t\t\tvar email = userData[i].emails[0].address;\n\t\t\t\t\temailArray.push(email);\n\t\t\t\t\tvar value = emailArray.join();\n\t\t\t\t\t$('.sendTo').val(value);\n\t\t\t\t}//i\n\t\t\t}//userData\n\t\t}\n\n\t}\n\n\trender(){\n     return(\n\n\t\t<section className=\"NotificationContent\">\n        <div className=\"row\">\n          <div className=\"col-lg-12 col-md-10 col-sm-12 col-xs-12 \">\n            <div className=\"box box-primary\">\n\t            <div className=\"box-header with-border\">\n\t            <h3 className=\"box-title\">BROADCAST TEMPLATE</h3>\n\t            </div>\n\t\t\t\t\t<div className=\"box-body\">\n\t\t\t\t\t\t<form className=\"newTemplateForm\">\n\t\t\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t\t\t<div className=\"col-lg-6 col-md-6 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t <label className=\"col-lg-6 label-category\">Template Type<span className=\"astrick\">*</span>:</label>     \t\t\t\t\t\t\n\t\t\t\t\t\t\t\t        <select className=\"form-control templateType\" name=\"templateType\" ref=\"templateType\" onChange={this.selectType.bind(this)}>\n\t\t\t\t\t\t\t\t      \t<option> -- Select --</option>\n\t\t\t\t\t\t\t\t\t\t\t<option> Email </option>\n\t\t\t\t\t\t\t\t\t\t\t<option> Notification </option>\n\t\t\t\t\t\t\t\t\t\t\t<option> SMS </option>\n\t\t\t\t\t\t\t\t       </select>\n    \t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"row inputrow\">\n\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t <label className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 label-category\">Send To<span className=\"astrick\">*</span>:</label>     \t\t\t\t\t\t\n\t\t\t\t\t\t\t\t        <input type=\"text\" ref=\"sendTo\" name=\"sendTo\" className=\"sendTo col-lg-12 col-md-12 col-sm-12 col-xs-12 inputValid\" />\n\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"row inputrow subjectRow\">\n\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t\t\t<div className=\"form-group subjectDiv\">\n\t\t\t\t\t\t\t\t\t <label className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 label-category\">Subject<span className=\"astrick\">*</span>:</label>     \t\t\t\t\t\t\n\t\t\t\t\t\t\t\t        <input type=\"text\" ref=\"subject\" name=\"subject\" className=\"subject col-lg-12 col-md-12 col-sm-12 col-xs-12 inputValid\" />\n\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"row inputrow\">\n\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t <label className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 label-category\">Message<span className=\"astrick\">*</span>:</label> \n\t\t\t\t\t\t\t\t\t <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 NOpadding\"> \n\t\t\t\t\t\t\t\t\t \t<div id=\"sendmessageContent\" name=\"content\"></div>  \n\t\t\t\t\t\t\t\t\t </div> \t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"savetemp col-lg-12 col-md-12 col-sm-12 col-xs-12\"> \n\t\t\t\t\t\t\t\t<button onClick={this.sendTemplate.bind(this)} type=\"submit\" className=\"col-lg-2 col-md-3 col-sm-6 col-xs-12 btn btn-primary pull-right sendtxtmsgbtn\">Send</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t</section>\n\n     \t);\n    }\n}\n\n"]},"hash":"4fe1a53a39dcf01aba58ce3201120cc94f3879eb"}
