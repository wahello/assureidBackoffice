{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-dom","imported":["render"],"specifiers":[{"kind":"named","imported":"render","local":"render"}]},{"source":"meteor/ultimatejs:tracker-react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TrackerReact"}]},{"source":"/imports/dashboard/reactCMS/api/Services.js","imported":["Services"],"specifiers":[{"kind":"named","imported":"Services","local":"Services"}]}],"exports":{"exported":["CreateUser"],"specifiers":[{"kind":"local","local":"CreateUser","exported":"default"}]}}},"options":{"filename":"imports/dashboard/userManagement/CreateUser.jsx","filenameRelative":"imports/dashboard/userManagement/CreateUser.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/userManagement/CreateUser.jsx.map","sourceFileName":"imports/dashboard/userManagement/CreateUser.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"CreateUser"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  \"default\": function () {\n    return CreateUser;\n  }\n});\nvar React = void 0,\n    Component = void 0;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar render = void 0;\nmodule.watch(require(\"react-dom\"), {\n  render: function (v) {\n    render = v;\n  }\n}, 1);\nvar TrackerReact = void 0;\nmodule.watch(require(\"meteor/ultimatejs:tracker-react\"), {\n  \"default\": function (v) {\n    TrackerReact = v;\n  }\n}, 2);\nvar Services = void 0;\nmodule.watch(require(\"/imports/dashboard/reactCMS/api/Services.js\"), {\n  Services: function (v) {\n    Services = v;\n  }\n}, 3);\n\nvar CreateUser = function (_TrackerReact) {\n  (0, _inherits3.default)(CreateUser, _TrackerReact);\n\n  function CreateUser(props) {\n    (0, _classCallCheck3.default)(this, CreateUser);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _TrackerReact.call(this, props));\n\n    _this.state = {\n      \"roleList\": [],\n      \"service\": [],\n      \"userList\": [],\n      \"userUniqueData\": [],\n      \"userSubscribe\": Meteor.subscribe('userfunction')\n    };\n    return _this;\n  }\n\n  CreateUser.prototype.createUser = function () {\n    function createUser(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var reportrefValue = this.refs.reportToRef.value;\n      console.log(\"reportrefValue :\" + reportrefValue);\n      var splitValue = reportrefValue.split(\"(\");\n      var reportToRole = splitValue[0];\n      var reportToName = splitValue[1].slice(0, -1);\n      var formValues = {\n        'firstname': this.refs.firstname.value,\n        'lastname': this.refs.lastname.value,\n        'signupEmail': this.refs.signupEmail.value,\n        'mobNumber': this.refs.mobNumber.value,\n        'servicesName': this.refs.servicesRef.value,\n        'reportToRole': reportToRole,\n        'reportToName': reportToName,\n        'signupPassword': \"user123\"\n      };\n      var assignedrole = this.refs.roleRef.value;\n      var defaultRoleWith = [\"backofficestaff\"];\n      defaultRoleWith.push(assignedrole);\n      Meteor.call('userCreateAccount', formValues, function (error, result) {\n        if (error) {\n          swal(error.reason);\n        } else {\n          // CLEAR ALL FIELDS\n          _this2.refs.firstname.value = '';\n          _this2.refs.lastname.value = '';\n          _this2.refs.signupEmail.value = '';\n          _this2.refs.mobNumber.value = ''; // ADD USER ROLE \n\n          var newID = result;\n          Meteor.call('addRoles', newID, defaultRoleWith, function (error, result) {\n            if (error) {\n              swal(error);\n            } else {\n              swal('Congratulations!! Account Created...');\n            }\n          }); // add role\n        } //end else\n\n      });\n      return 0;\n    }\n\n    return createUser;\n  }();\n\n  CreateUser.prototype.componentDidMount = function () {\n    function componentDidMount() {\n      var _this3 = this;\n\n      // $(\"#signUpUser\").validate();\n      $(\"html,body\").scrollTop(0);\n\n      if (!$(\"#adminLte\").length > 0 && !$('body').hasClass('adminLte')) {\n        var adminLte = document.createElement(\"script\");\n        adminLte.type = \"text/javascript\";\n        adminLte.src = \"/js/adminLte.js\";\n        $(\"body\").append(adminLte);\n      }\n\n      this.serviceTracker = Tracker.autorun(function () {\n        var handle = Meteor.subscribe(\"services\");\n\n        if (handle.ready()) {\n          var services = Services.find({}, {\n            field: {\n              'serviceName': 1\n            }\n          }).fetch();\n\n          _this3.setState({\n            \"service\": services\n          });\n        }\n      });\n      this.roleTracker = Tracker.autorun(function () {\n        var handle = Meteor.subscribe(\"rolefunction\");\n\n        if (handle.ready()) {\n          if (_this3.state.userSubscribe.ready()) {\n            var allusers = Meteor.users.find({\n              \"roles\": {\n                $nin: [\"user\", \"superAdmin\", \"admin\"]\n              }\n            }).fetch();\n            var allRoles = Meteor.roles.find({}).fetch();\n\n            if (allusers.length > 0 && allRoles.length > 0) {\n              var newArr = []; // console.log(\"allusers: \",allusers);\n\n              for (var i = 0; i < allusers.length; i++) {\n                var currentText = allusers[i].profile.firstname + \" \" + allusers[i].profile.lastname;\n                var reportName = allusers[i].profile.firstname + \" \" + allusers[i].profile.lastname;\n                var userLen = allusers[i].roles;\n\n                if (userLen.length) {\n                  for (k = 0; k < userLen.length; k++) {\n                    if (userLen[k] != \"backofficestaff\") {\n                      currentText = userLen[k] + \"(\" + currentText + \")\";\n                    }\n                  }\n                }\n\n                newArr.push(currentText);\n              }\n\n              var roleArray = [];\n\n              for (var j = 0; j < allRoles.length; j++) {\n                if (allRoles[j].name != \"superAdmin\" && allRoles[j].name != \"admin\" && allRoles[j].name != \"user\") {\n                  var rolevalue = allRoles[j].name;\n                  roleArray.push(rolevalue);\n                }\n              }\n\n              _this3.setState({\n                \"roles\": allRoles,\n                \"userUniqueData\": newArr,\n                \"roleList\": roleArray,\n                \"reporttoName\": reportName\n              });\n\n              console.log(\"roleList :\" + JSON.stringify(_this3.state.userUniqueData));\n              console.log(\"roleList :\" + JSON.stringify(_this3.state.roleList));\n            }\n          }\n        }\n      });\n    }\n\n    return componentDidMount;\n  }();\n\n  CreateUser.prototype.componentWillMount = function () {\n    function componentWillMount() {// if (!!!$(\"link[href='/css/dashboard.css']\").length > 0) {\n      //   var dashboardCss = document.createElement(\"link\");\n      //   dashboardCss.type = \"text/css\"; \n      //   dashboardCss.rel = \"stylesheet\";\n      //   dashboardCss.href = \"/css/dashboard.css\"; \n      //   document.head.append(dashboardCss);\n      // }\n    }\n\n    return componentWillMount;\n  }();\n\n  CreateUser.prototype.componentWillUnmount = function () {\n    function componentWillUnmount() {\n      $(\"script[src='/js/adminLte.js']\").remove(); // $(\"link[href='/css/dashboard.css']\").remove(); \n    }\n\n    return componentWillUnmount;\n  }();\n\n  CreateUser.prototype.render = function () {\n    function render() {\n      return React.createElement(\n        \"section\",\n        {\n          className: \"content-wrapper\"\n        },\n        React.createElement(\n          \"div\",\n          {\n            className: \"content\"\n          },\n          React.createElement(\n            \"div\",\n            {\n              className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"box box-primary\"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"box-header with-border\"\n                },\n                React.createElement(\n                  \"h2\",\n                  {\n                    className: \"box-title\"\n                  },\n                  \"CREATE USER\"\n                )\n              ),\n              React.createElement(\n                \"div\",\n                {\n                  className: \"box-body \"\n                },\n                React.createElement(\n                  \"div\",\n                  {\n                    className: \"col-lg-12 col-sm-12 col-xs-12 col-md-12\"\n                  },\n                  React.createElement(\n                    \"form\",\n                    {\n                      id: \"signUpUser\",\n                      onSubmit: this.createUser.bind(this)\n                    },\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"signupBody col-lg-12 col-md-8 col-sm-12 col-xs-12\"\n                      },\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\"\n                        },\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"blocking-span\"\n                          },\n                          React.createElement(\n                            \"label\",\n                            {\n                              className: \"floating-label\"\n                            },\n                            \"First Name\"\n                          ),\n                          React.createElement(\"input\", {\n                            type: \"text\",\n                            title: \"Only alphabets are allowed!\",\n                            className: \"form-control inputText\",\n                            ref: \"firstname\",\n                            name: \"firstname\",\n                            pattern: \"[a-zA-Z][a-zA-Z ]+\",\n                            required: true\n                          })\n                        )\n                      ),\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\"\n                        },\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"blocking-span\"\n                          },\n                          React.createElement(\n                            \"label\",\n                            {\n                              className: \"floating-label\"\n                            },\n                            \"Last Name\"\n                          ),\n                          React.createElement(\"input\", {\n                            type: \"text\",\n                            title: \"Please enter alphabets only!\",\n                            className: \"form-control inputText\",\n                            ref: \"lastname\",\n                            name: \"lastname\",\n                            pattern: \"[A-Za-z]+\",\n                            required: true\n                          })\n                        )\n                      ),\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\"\n                        },\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"blocking-span\"\n                          },\n                          React.createElement(\n                            \"label\",\n                            {\n                              className: \"floating-label\"\n                            },\n                            \"Email ID\"\n                          ),\n                          React.createElement(\"input\", {\n                            type: \"email\",\n                            title: \"Please match email format!\",\n                            className: \"form-control signupsetting inputText\",\n                            ref: \"signupEmail\",\n                            name: \"signupEmail\",\n                            required: true\n                          })\n                        )\n                      ),\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\"\n                        },\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"blocking-span\"\n                          },\n                          React.createElement(\n                            \"label\",\n                            {\n                              className: \"floating-label\"\n                            },\n                            \"Phone Number\"\n                          ),\n                          React.createElement(\"input\", {\n                            type: \"text\",\n                            pattern: \"^(0|[1-9][0-9]*)$\",\n                            title: \"Please enter numbers only!\",\n                            className: \"form-control inputText\",\n                            ref: \"mobNumber\",\n                            name: \"mobNumber\",\n                            required: true\n                          })\n                        )\n                      ),\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\"\n                        },\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"blocking-span\"\n                          },\n                          React.createElement(\n                            \"label\",\n                            {\n                              className: \"floating-label\"\n                            },\n                            \"Assign Service\"\n                          ),\n                          React.createElement(\n                            \"select\",\n                            {\n                              className: \"form-control allProductSubCategories\",\n                              \"aria-describedby\": \"basic-addon1\",\n                              ref: \"servicesRef\"\n                            },\n                            this.state.service.map(function (data, index) {\n                              return React.createElement(\n                                \"option\",\n                                {\n                                  key: index\n                                },\n                                data.serviceName\n                              );\n                            })\n                          )\n                        )\n                      ),\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\"\n                        },\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"blocking-span\"\n                          },\n                          React.createElement(\n                            \"label\",\n                            {\n                              className: \"floating-label\"\n                            },\n                            \"Assign Role\"\n                          ),\n                          React.createElement(\n                            \"select\",\n                            {\n                              className: \"form-control allProductSubCategories\",\n                              \"aria-describedby\": \"basic-addon1\",\n                              ref: \"roleRef\"\n                            },\n                            this.state.roleList.map(function (data, index) {\n                              return React.createElement(\n                                \"option\",\n                                {\n                                  key: index\n                                },\n                                data\n                              );\n                            })\n                          )\n                        )\n                      ),\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\"\n                        },\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"blocking-span\"\n                          },\n                          React.createElement(\n                            \"label\",\n                            {\n                              className: \"floating-label\"\n                            },\n                            \"Reporting To\"\n                          ),\n                          React.createElement(\n                            \"select\",\n                            {\n                              className: \"form-control allProductSubCategories\",\n                              \"aria-describedby\": \"basic-addon1\",\n                              ref: \"reportToRef\"\n                            },\n                            this.state.userUniqueData.map(function (data, index) {\n                              return React.createElement(\n                                \"option\",\n                                {\n                                  key: index\n                                },\n                                data\n                              );\n                            })\n                          )\n                        )\n                      ),\n                      React.createElement(\n                        \"div\",\n                        {\n                          className: \"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 \"\n                        },\n                        React.createElement(\"input\", {\n                          className: \"col-lg-3 col-md-4 col-xs-12 col-sm-12 col-xs-12 btn btn-primary pull-right\",\n                          type: \"submit\",\n                          value: \"REGISTER\"\n                        })\n                      )\n                    )\n                  )\n                )\n              )\n            )\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return CreateUser;\n}(TrackerReact(Component));","map":{"version":3,"sources":["imports/dashboard/userManagement/CreateUser.jsx"],"names":["module","export","CreateUser","React","Component","watch","require","v","render","TrackerReact","Services","props","state","Meteor","subscribe","createUser","event","preventDefault","reportrefValue","refs","reportToRef","value","console","log","splitValue","split","reportToRole","reportToName","slice","formValues","firstname","lastname","signupEmail","mobNumber","servicesRef","assignedrole","roleRef","defaultRoleWith","push","call","error","result","swal","reason","newID","componentDidMount","$","scrollTop","length","hasClass","adminLte","document","createElement","type","src","append","serviceTracker","Tracker","autorun","handle","ready","services","find","field","fetch","setState","roleTracker","userSubscribe","allusers","users","$nin","allRoles","roles","newArr","i","currentText","profile","reportName","userLen","k","roleArray","j","name","rolevalue","JSON","stringify","userUniqueData","roleList","componentWillMount","componentWillUnmount","remove","bind","service","map","data","index","serviceName"],"mappings":"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","file":"imports/dashboard/userManagement/CreateUser.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport TrackerReact from 'meteor/ultimatejs:tracker-react';\nimport {Services} from '/imports/dashboard/reactCMS/api/Services.js';\n\nexport default class CreateUser extends TrackerReact(Component) {\n\n  constructor(props){\n    super(props);\n    this.state={\n      \"roleList\" :[],\n      \"service\" :[],\n      \"userList\" :[],\n      \"userUniqueData\":[],\n      \"userSubscribe\": Meteor.subscribe('userfunction'),\n    }\n  }\n\tcreateUser(event){\n\t\tevent.preventDefault();\n        var reportrefValue = this.refs.reportToRef.value;\n        console.log(\"reportrefValue :\"+reportrefValue);\n        var splitValue   =  reportrefValue.split(\"(\");\n        var reportToRole = splitValue[0];\n        var reportToName = splitValue[1].slice(0, -1);\n        \n        var formValues = {\n                          'firstname'        : this.refs.firstname.value,\n                          'lastname'         : this.refs.lastname.value,\n                          'signupEmail'      : this.refs.signupEmail.value,\n                          'mobNumber'        : this.refs.mobNumber.value,\n                          'servicesName'     : this.refs.servicesRef.value,\n                          'reportToRole'         : reportToRole,\n                          'reportToName'     : reportToName,\n                          'signupPassword'   : \"user123\",\n                        }   \n        var assignedrole = this.refs.roleRef.value; \n        var defaultRoleWith = [\"backofficestaff\"];\n        defaultRoleWith.push(assignedrole);\n        \n        \n        Meteor.call('userCreateAccount', formValues ,(error,result) => {\n          if(error){ \n            swal(error.reason);\n          }else{      \n\n          \t// CLEAR ALL FIELDS\n            this.refs.firstname.value      = '';\n            this.refs.lastname.value       = '';\n            this.refs.signupEmail.value    = '';\n            this.refs.mobNumber.value      = '';\n\n\n            // ADD USER ROLE \n            var newID = result;\n            Meteor.call('addRoles', newID , defaultRoleWith, function(error,result){\n              if(error){\n                swal(error);\n              }else{              \t\n\t\t\t\tswal('Congratulations!! Account Created...');\n              }\n            }); // add role\n\t\t            \n          } //end else\n        });\n\n    return 0;  \t\n\n\t}\n\n\t componentDidMount() {\n\t \t// $(\"#signUpUser\").validate();\n\t \t    $(\"html,body\").scrollTop(0);\n    if (!$(\"#adminLte\").length>0 && !$('body').hasClass('adminLte')) {\n     var adminLte = document.createElement(\"script\");  \n     adminLte.type=\"text/javascript\";  \n     adminLte.src = \"/js/adminLte.js\";  \n     $(\"body\").append(adminLte);  \n    }\n\n    this.serviceTracker = Tracker.autorun( ()=> {\n      var handle = Meteor.subscribe(\"services\");\n      if(handle.ready()){\n        var services = Services.find({},{field:{'serviceName':1}}).fetch();\n       \n        this.setState({\n          \"service\": services,\n        });\n      }\n    });\n\n    this.roleTracker = Tracker.autorun( ()=> {\n      var handle = Meteor.subscribe(\"rolefunction\");\n    \n      if(handle.ready()){\n        if(this.state.userSubscribe.ready()){\n          var allusers = Meteor.users.find({\"roles\":{$nin:[\"user\",\"superAdmin\",\"admin\"]}}).fetch();\n          var allRoles = Meteor.roles.find({}).fetch();         \n          \n          if(allusers.length >0 && allRoles.length >0){\n            var newArr = [];\n            // console.log(\"allusers: \",allusers);\n            for(var i=0;i<allusers.length;i++){\n              \n              var currentText = allusers[i].profile.firstname +\" \"+ allusers[i].profile.lastname;\n              var reportName  = allusers[i].profile.firstname +\" \"+ allusers[i].profile.lastname;\n              var userLen = allusers[i].roles;\n              if(userLen.length){\n                for(k=0;k<userLen.length;k++){\n                  if(userLen[k]!=\"backofficestaff\"){\n                    currentText = userLen[k] +\"(\"+currentText+\")\" ;\n                  }\n                }\n              }\n             \n              newArr.push(currentText);\n            }\n            var roleArray = [];\n            for(var j=0;j<allRoles.length;j++){\n              if((allRoles[j].name!=\"superAdmin\") && (allRoles[j].name!= \"admin\") && (allRoles[j].name!= \"user\"))  {\n\n                var rolevalue = allRoles[j].name;\n                roleArray.push(rolevalue);\n              }\n            }\n            \n\n            this.setState({\n              \"roles\": allRoles,\n              \"userUniqueData\":newArr,\n              \"roleList\"      : roleArray,\n              \"reporttoName\"  : reportName\n           \n          });   \n          \n          console.log(\"roleList :\"+JSON.stringify(this.state.userUniqueData));\n          console.log(\"roleList :\"+JSON.stringify(this.state.roleList));\n          }\n         \n        }\n      }\n   \n    });\n\n\n\t }\n   componentWillMount() {\n    // if (!!!$(\"link[href='/css/dashboard.css']\").length > 0) {\n    //   var dashboardCss = document.createElement(\"link\");\n    //   dashboardCss.type = \"text/css\"; \n    //   dashboardCss.rel = \"stylesheet\";\n    //   dashboardCss.href = \"/css/dashboard.css\"; \n    //   document.head.append(dashboardCss);\n    // }\n  }\n   componentWillUnmount(){  \n     $(\"script[src='/js/adminLte.js']\").remove(); \n     // $(\"link[href='/css/dashboard.css']\").remove(); \n   }\n\n\n\trender() {\n\n       return (\n\n       \t<section className=\"content-wrapper\">\n        <div className=\"content\">\n          <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n            <div className=\"box box-primary\">\n              <div className=\"box-header with-border\">\n               <h2 className=\"box-title\">CREATE USER</h2>\n              </div>\n           \n\t            <div className=\"box-body \">\n\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-sm-12 col-xs-12 col-md-12\">\n\t\t\t\t\t\t\t\t  <form id=\"signUpUser\" onSubmit={this.createUser.bind(this)}>\n\t\t\t\t\t\t\t\t\t  <div className=\"signupBody col-lg-12 col-md-8 col-sm-12 col-xs-12\">\n\n\t\t\t\t\t\t\t\t\t   <div className=\"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\">\n\t\t\t\t\t\t\t\t\t   \t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t\t   \t\t  <label className=\"floating-label\">First Name</label>\n\t\t\t\t\t\t\t\t\t\t\t   \t<input type=\"text\" title=\"Only alphabets are allowed!\" className=\"form-control inputText\" ref=\"firstname\" name=\"firstname\" pattern=\"[a-zA-Z][a-zA-Z ]+\" required />\n\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t\t   <div className=\"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\">\n\t\t\t\t\t\t\t\t\t   \t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t\t\t   \t\t <label className=\"floating-label\">Last Name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t   <input type=\"text\" title=\"Please enter alphabets only!\" className=\"form-control inputText\" ref=\"lastname\" name=\"lastname\" pattern=\"[A-Za-z]+\" required />\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t   \t\t<div className=\"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Email ID</label>\n\t\t\t\t\t\t\t\t\t\t\t    <input type=\"email\" title=\"Please match email format!\" className=\"form-control signupsetting inputText\" ref=\"signupEmail\" name=\"signupEmail\" required />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t   \t\t<div className=\"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Phone Number</label>\n\t\t\t\t\t\t\t\t\t\t\t    <input type=\"text\" pattern=\"^(0|[1-9][0-9]*)$\" title=\"Please enter numbers only!\" className=\"form-control inputText\" ref=\"mobNumber\" name=\"mobNumber\" required />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n                      <div className=\"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Assign Service</label>\n                           {/* <span className=\"input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-gg\" aria-hidden=\"true\"></i></span> */}\n                              <select className=\"form-control allProductSubCategories\" aria-describedby=\"basic-addon1\" ref=\"servicesRef\">\n                                  { this.state.service.map( (data, index)=>{\n                                      return (\n                                          <option key={index}>{data.serviceName}</option>\n                                      );\n                                  })\n                                  }\n                              </select>\n\t\t\t\t\t\t\t\t\t\t  \t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n                      <div className=\"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Assign Role</label>\n                           <select className=\"form-control allProductSubCategories\" aria-describedby=\"basic-addon1\" ref=\"roleRef\">\n                                  { this.state.roleList.map( (data, index)=>{\n                                      return (\n                                          <option key={index}>{data}</option>\n                                      );\n                                  })\n                                  }\n                           </select>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n                      <div className=\"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Reporting To</label>\n                           {/* <span className=\"input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-gg\" aria-hidden=\"true\"></i></span> */}\n                           \n                              <select className=\"form-control allProductSubCategories\" aria-describedby=\"basic-addon1\" ref=\"reportToRef\">\n                                  { this.state.userUniqueData.map( (data, index)=>{\n                                      return (\n                                          <option key={index}>\n                                            \n                                            {data}\n                                          </option>\n                                      );\n                                  })\n                                  }\n                              </select>\n\t\t\t\t\t\t\t\t\t\t  \t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t\t\t<div className=\"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 \">\n\t\t\t\t\t\t\t\t\t    \t<input className=\"col-lg-3 col-md-4 col-xs-12 col-sm-12 col-xs-12 btn btn-primary pull-right\" type=\"submit\" value=\"REGISTER\"/>\n\t\t\t\t\t\t\t\t\t   </div>\t\n\n\t\t\t\t\t\t\t\t\t  </div> \n\t\t\t\t\t\t\t\t  </form>\n\t\t\t\t\t\t \t \t</div>\t\n\t\t\t\t \t</div>\n\t\t\t \t</div>\n\t\t\t </div>\n\t\t </div>\n\t\t </section>\n\t    );\n\n\t} \n\n}"]},"hash":"96ab86f3a6e1ac97ca1c19e326fb368d58a1e4b0"}
