{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/mongo","imported":["Mongo"],"specifiers":[{"kind":"named","imported":"Mongo","local":"Mongo"}]},{"source":"meteor/session","imported":["Session"],"specifiers":[{"kind":"named","imported":"Session","local":"Session"}]}],"exports":{"exported":["Category"],"specifiers":[{"kind":"local","local":"Category","exported":"Category"}]}}},"options":{"filename":"imports/dashboard/product/addNewProduct/api/CategoryMaster.js","filenameRelative":"imports/dashboard/product/addNewProduct/api/CategoryMaster.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/product/addNewProduct/api/CategoryMaster.js.map","sourceFileName":"imports/dashboard/product/addNewProduct/api/CategoryMaster.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"CategoryMaster"},"ignored":false,"code":"module.export({\n    Category: () => Category\n});\nlet Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n    Meteor(v) {\n        Meteor = v;\n    }\n\n}, 0);\nlet Mongo;\nmodule.watch(require(\"meteor/mongo\"), {\n    Mongo(v) {\n        Mongo = v;\n    }\n\n}, 1);\nlet Session;\nmodule.watch(require(\"meteor/session\"), {\n    Session(v) {\n        Session = v;\n    }\n\n}, 2);\nconst Category = new Mongo.Collection(\"category\");\n\nif (Meteor.isServer) {\n    console.log('in server'); // import { CategoryImage } from './CategoryImage.js';\n\n    Meteor.publish(\"category\", function () {\n        return Category.find({});\n    });\n    Meteor.methods({\n        'addNewCategory': function (formValues) {\n            var catCodeLength = Category.find({}).count();\n            console.log(\"Collection length: \", catCodeLength);\n            var subCategoryCode = catCodeLength + \"-\" + 0;\n            var obj = {\n                \"subCategoryCode\": subCategoryCode,\n                \"subCategoryTitle\": formValues.subCategory\n            };\n            var categoryInsert = Category.insert({\n                \"categoryCode\": catCodeLength,\n                \"category\": formValues.category,\n                \"subCategory\": [obj],\n                \"status\": \"active\",\n                \"dateAdded\": new Date()\n            }, (error, result) => {\n                if (error) {\n                    return error;\n                }\n\n                if (result) {\n                    return result;\n                }\n            });\n            return categoryInsert;\n        },\n        'addNewSubCategory': function (formValues) {\n            var catCode = Category.findOne({\n                \"category\": formValues.category\n            });\n            console.log(\"Collection length: \", catCode);\n\n            if (catCode) {\n                if (catCode.subCategory.length > 0) {\n                    var subCategoryCode = catCode.categoryCode + \"-\" + catCode.subCategory.length;\n                } else {\n                    var subCategoryCode = catCode + \"-\" + 0;\n                }\n            }\n\n            var obj = {\n                \"subCategoryCode\": subCategoryCode,\n                \"subCategoryTitle\": formValues.subCategory\n            };\n            var addSubcategory = Category.update({\n                \"category\": formValues.category\n            }, {\n                $push: {\n                    \"subCategory\": obj\n                }\n            }, (error, result) => {\n                if (error) {\n                    return error;\n                }\n\n                if (result) {\n                    return result;\n                }\n            });\n            return addSubcategory;\n        }\n    });\n}","map":{"version":3,"sources":["imports/dashboard/product/addNewProduct/api/CategoryMaster.js"],"names":["module","export","Category","Meteor","watch","require","v","Mongo","Session","Collection","isServer","console","log","publish","find","methods","formValues","catCodeLength","count","subCategoryCode","obj","subCategory","categoryInsert","insert","category","Date","error","result","catCode","findOne","length","categoryCode","addSubcategory","update","$push"],"mappings":"AAAAA,OAAOC,MAAP,CAAc;AAACC,cAAS,MAAIA;AAAd,CAAd;AAAuC,IAAIC,MAAJ;AAAWH,OAAOI,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACF,WAAOG,CAAP,EAAS;AAACH,iBAAOG,CAAP;AAAS;;AAApB,CAAtC,EAA4D,CAA5D;AAA+D,IAAIC,KAAJ;AAAUP,OAAOI,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACE,UAAMD,CAAN,EAAQ;AAACC,gBAAMD,CAAN;AAAQ;;AAAlB,CAArC,EAAyD,CAAzD;AAA4D,IAAIE,OAAJ;AAAYR,OAAOI,KAAP,CAAaC,QAAQ,gBAAR,CAAb,EAAuC;AAACG,YAAQF,CAAR,EAAU;AAACE,kBAAQF,CAAR;AAAU;;AAAtB,CAAvC,EAA+D,CAA/D;AAK5L,MAAMJ,WAAW,IAAIK,MAAME,UAAV,CAAqB,UAArB,CAAjB;;AAGP,IAAGN,OAAOO,QAAV,EAAmB;AACfC,YAAQC,GAAR,CAAY,WAAZ,EADe,CAEf;;AACAT,WAAOU,OAAP,CAAe,UAAf,EAA2B,YAAU;AACjC,eAAOX,SAASY,IAAT,CAAc,EAAd,CAAP;AACH,KAFD;AAIJX,WAAOY,OAAP,CAAe;AACX,0BAAkB,UAASC,UAAT,EAAoB;AAClC,gBAAIC,gBAAgBf,SAASY,IAAT,CAAc,EAAd,EAAkBI,KAAlB,EAApB;AACAP,oBAAQC,GAAR,CAAY,qBAAZ,EAAkCK,aAAlC;AAGA,gBAAIE,kBAAkBF,gBAAgB,GAAhB,GAAsB,CAA5C;AAIA,gBAAIG,MAAM;AACN,mCAAsBD,eADhB;AAEN,oCAAsBH,WAAWK;AAF3B,aAAV;AAKA,gBAAIC,iBAAiBpB,SAASqB,MAAT,CAAgB;AACb,gCAAwBN,aADX;AAEb,4BAAwBD,WAAWQ,QAFtB;AAGb,+BAAwB,CAACJ,GAAD,CAHX;AAIb,0BAAwB,QAJX;AAKb,6BAAwB,IAAIK,IAAJ;AALX,aAAhB,EAMC,CAACC,KAAD,EAAOC,MAAP,KAAkB;AACtB,oBAAGD,KAAH,EAAS;AACC,2BAAOA,KAAP;AACN;;AACE,oBAAGC,MAAH,EAAU;AACN,2BAAOA,MAAP;AACH;AACV,aAbM,CAArB;AAcA,mBAAOL,cAAP;AACH,SA9BU;AAgCX,6BAAqB,UAASN,UAAT,EAAoB;AACrC,gBAAIY,UAAU1B,SAAS2B,OAAT,CAAiB;AAAC,4BAAWb,WAAWQ;AAAvB,aAAjB,CAAd;AACAb,oBAAQC,GAAR,CAAY,qBAAZ,EAAkCgB,OAAlC;;AAEA,gBAAGA,OAAH,EAAW;AACP,oBAAGA,QAAQP,WAAR,CAAoBS,MAApB,GAA2B,CAA9B,EAAgC;AAC5B,wBAAIX,kBAAkBS,QAAQG,YAAR,GAAuB,GAAvB,GAA6BH,QAAQP,WAAR,CAAoBS,MAAvE;AACH,iBAFD,MAEO;AACH,wBAAIX,kBAAkBS,UAAU,GAAV,GAAgB,CAAtC;AACH;AAEJ;;AAED,gBAAIR,MAAM;AACN,mCAAsBD,eADhB;AAEN,oCAAsBH,WAAWK;AAF3B,aAAV;AAKA,gBAAIW,iBAAiB9B,SAAS+B,MAAT,CACG;AAAC,4BAAWjB,WAAWQ;AAAvB,aADH,EAEG;AAACU,uBAAQ;AACD,mCAAgBd;AADf;AAAT,aAFH,EAKK,CAACM,KAAD,EAAOC,MAAP,KAAkB;AACtB,oBAAGD,KAAH,EAAS;AACC,2BAAOA,KAAP;AACN;;AACE,oBAAGC,MAAH,EAAU;AACN,2BAAOA,MAAP;AACH;AACV,aAZE,CAArB;AAaA,mBAASK,cAAT;AACH;AAhEU,KAAf;AAoEC","file":"imports/dashboard/product/addNewProduct/api/CategoryMaster.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Session } from 'meteor/session';\n\n\nexport const Category = new Mongo.Collection(\"category\");\n\n\nif(Meteor.isServer){\n    console.log('in server');\n    // import { CategoryImage } from './CategoryImage.js';\n    Meteor.publish(\"category\", function(){\n        return Category.find({});\n    });\n\nMeteor.methods({\n    'addNewCategory': function(formValues){\n        var catCodeLength = Category.find({}).count();\n        console.log(\"Collection length: \",catCodeLength);\n\n\n        var subCategoryCode = catCodeLength + \"-\" + 0;\n\n\n\n        var obj = {\n            \"subCategoryCode\"   : subCategoryCode,\n            \"subCategoryTitle\"  : formValues.subCategory,\n        }\n\n        var categoryInsert = Category.insert({\n                                \"categoryCode\"      :   catCodeLength,\n                                \"category\"          :   formValues.category,\n                                \"subCategory\"       :   [obj],\n                                \"status\"            :   \"active\",\n                                \"dateAdded\"         :   new Date(),\n                            },(error,result) => {\n                    \t\t    if(error){\n                                    return error;\n                    \t        }\n                                if(result){\n                                    return result;\n                                }\n                    \t\t});\n        return categoryInsert;\n    },\n\n    'addNewSubCategory': function(formValues){\n        var catCode = Category.findOne({\"category\":formValues.category});\n        console.log(\"Collection length: \",catCode);\n\n        if(catCode){\n            if(catCode.subCategory.length>0){\n                var subCategoryCode = catCode.categoryCode + \"-\" + catCode.subCategory.length;\n            } else {\n                var subCategoryCode = catCode + \"-\" + 0;\n            }\n\n        }\n\n        var obj = {\n            \"subCategoryCode\"   : subCategoryCode,\n            \"subCategoryTitle\"  : formValues.subCategory,\n        }\n\n        var addSubcategory = Category.update(\n                                {\"category\":formValues.category},\n                                {$push:  {\n                                        \"subCategory\" : obj,\n                                        }\n                                },(error,result) => {\n                        \t\t    if(error){\n                                        return error;\n                        \t        }\n                                    if(result){\n                                        return result;\n                                    }\n                        \t\t});\n        return   addSubcategory;\n    },\n\n});\n\n}\n"]},"hash":"4750ceface5dc38c32cfbedb8ebec84431562de9"}
