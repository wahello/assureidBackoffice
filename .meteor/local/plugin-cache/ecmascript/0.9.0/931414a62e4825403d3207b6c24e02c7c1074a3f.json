{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"server/slingshot.js","filenameRelative":"server/slingshot.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"server/slingshot.js.map","sourceFileName":"server/slingshot.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"slingshot"},"ignored":false,"code":"// import { Meteor } from 'meteor/meteor';\n// import { ProjectSettings } from '/imports/dashboard/product/addNewProduct/api/projectSettings.js';\n// Meteor.startup(() => {\n//   Meteor.methods({\n//     'removeS3Data'(image){\n//           console.log('delete method called ' + image);\n//           let bucket = \"assureid.com\";\n//           let imageUrl = image.replace('https://' + bucket + '.s3-ap-south-1.amazonaws.com/', '');\n//          AWS.config.update({\n//               accessKeyId: \"AKIAJHP7QAQIWG5NP6SQ\",\n//               secretAccessKey: \"Om0Yi5E/Ec0ZnEU0BcM46hQvcBsef7B7WfJ1xAZ3\",\n//               region: \"ap-south-1\",\n//           });\n//           console.log('delete method called url ' + imageUrl);\n//     var s3 = new AWS.S3();\n//     var params = {\n//       Bucket: bucket, // 'mybucket'\n//       Key: imageUrl // 'images/myimage.jpg'\n//     };\n//     var paramList = {\n//       Bucket: bucket\n//     };\n//     var listObjects = Meteor.wrapAsync(\n//       s3.listObjects(paramList,function(error,data){\n//         if (error) {\n//           console.log(\"error list \" +error);\n//         }\n//         else {\n//           console.log(data);\n//         }\n//       })\n//     );\n//     var deleteObject = Meteor.wrapAsync(\n//       s3.deleteObject(params, function (error, data) {\n//         if (error) {\n//           console.log(\"error \" +error);\n//         }\n//         else {\n//           console.log(data);\n//         }\n//       })\n//     );\n//     // Meteor.users.update(Meteor.userId(), {$set: {\"profile.image\": \"\"}});\n//   }\n//   });\n//   var slingvar = ProjectSettings.findOne({\"_id\":\"1\"});\n//   // console.log(\"slingvar\",slingvar);\n//   if(slingvar){\n//     Slingshot.fileRestrictions(\"myFileUploads\", {\n//       allowedFileTypes: [\"image/png\", \"image/jpeg\", \"image/gif\", \"image/jpg\"],\n//       maxSize: 10 * 1024 * 1024 // 10 MB (use null for unlimited).\n//     });\n//      Slingshot.createDirective(\"myFileUploads\", Slingshot.S3Storage, {\n//       bucket: slingvar.bucket,\n//       acl: \"public-read\",\n//       AWSAccessKeyId: slingvar.key,\n//       AWSSecretAccessKey: slingvar.secret,\n//       region: slingvar.region,\n//       authorize: function () {\n//         //Deny uploads if user is not logged in.\n//         if (!this.userId) {\n//           var message = \"Please login before posting files\";\n//           throw new Meteor.Error(\"Login Required\", message);\n//         }\n//         return true;\n//       },\n//       key: function (file,metaContext) {\n//         //Store file into a directory by the user's username.\n//         let user = Meteor.users.findOne(this.userId);\n//         let fileType = file.name.split(\".\");\n//         return \"patelconstruction/\" + file.name;\n//       }\n//     });\n//   }\n// });","map":{"version":3,"sources":["server/slingshot.js"],"names":[],"mappings":"AAAA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","file":"server/slingshot.js.map","sourcesContent":["// import { Meteor } from 'meteor/meteor';\n// import { ProjectSettings } from '/imports/dashboard/product/addNewProduct/api/projectSettings.js';\n\n\n// Meteor.startup(() => {\n\n//   Meteor.methods({\n//     'removeS3Data'(image){\n//           console.log('delete method called ' + image);\n//           let bucket = \"assureid.com\";\n//           let imageUrl = image.replace('https://' + bucket + '.s3-ap-south-1.amazonaws.com/', '');\n//          AWS.config.update({\n//               accessKeyId: \"AKIAJHP7QAQIWG5NP6SQ\",\n//               secretAccessKey: \"Om0Yi5E/Ec0ZnEU0BcM46hQvcBsef7B7WfJ1xAZ3\",\n//               region: \"ap-south-1\",\n//           });\n//           console.log('delete method called url ' + imageUrl);\n\n//     var s3 = new AWS.S3();\n//     var params = {\n//       Bucket: bucket, // 'mybucket'\n//       Key: imageUrl // 'images/myimage.jpg'\n//     };\n//     var paramList = {\n//       Bucket: bucket\n//     };\n//     var listObjects = Meteor.wrapAsync(\n//       s3.listObjects(paramList,function(error,data){\n//         if (error) {\n//           console.log(\"error list \" +error);\n//         }\n//         else {\n//           console.log(data);\n//         }\n//       })\n//     );\n//     var deleteObject = Meteor.wrapAsync(\n//       s3.deleteObject(params, function (error, data) {\n//         if (error) {\n//           console.log(\"error \" +error);\n//         }\n//         else {\n//           console.log(data);\n//         }\n//       })\n//     );\n\n//     // Meteor.users.update(Meteor.userId(), {$set: {\"profile.image\": \"\"}});\n//   }\n//   });\n\n \n\n//   var slingvar = ProjectSettings.findOne({\"_id\":\"1\"});\n//   // console.log(\"slingvar\",slingvar);\n\n//   if(slingvar){\n//     Slingshot.fileRestrictions(\"myFileUploads\", {\n//       allowedFileTypes: [\"image/png\", \"image/jpeg\", \"image/gif\", \"image/jpg\"],\n//       maxSize: 10 * 1024 * 1024 // 10 MB (use null for unlimited).\n//     });\n\n//      Slingshot.createDirective(\"myFileUploads\", Slingshot.S3Storage, {\n//       bucket: slingvar.bucket,\n//       acl: \"public-read\",\n//       AWSAccessKeyId: slingvar.key,\n//       AWSSecretAccessKey: slingvar.secret,\n//       region: slingvar.region,\n//       authorize: function () {\n//         //Deny uploads if user is not logged in.\n//         if (!this.userId) {\n//           var message = \"Please login before posting files\";\n//           throw new Meteor.Error(\"Login Required\", message);\n//         }\n//         return true;\n//       },\n//       key: function (file,metaContext) {\n//         //Store file into a directory by the user's username.\n//         let user = Meteor.users.findOne(this.userId);\n//         let fileType = file.name.split(\".\");\n//         return \"patelconstruction/\" + file.name;\n//       }\n//     });\n//   }\n \n// });\n"]},"hash":"931414a62e4825403d3207b6c24e02c7c1074a3f"}
