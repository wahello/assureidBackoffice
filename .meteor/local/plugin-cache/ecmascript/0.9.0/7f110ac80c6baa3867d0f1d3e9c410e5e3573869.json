{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/mongo","imported":["Mongo"],"specifiers":[{"kind":"named","imported":"Mongo","local":"Mongo"}]},{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-dom","imported":["render"],"specifiers":[{"kind":"named","imported":"render","local":"render"}]},{"source":"meteor/ultimatejs:tracker-react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TrackerReact"}]},{"source":"meteor/react-meteor-data","imported":["withTracker"],"specifiers":[{"kind":"named","imported":"withTracker","local":"withTracker"}]},{"source":"react-validation","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Validation"}]},{"source":"validator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"validator"}]},{"source":"meteor/tracker","imported":["Tracker"],"specifiers":[{"kind":"named","imported":"Tracker","local":"Tracker"}]},{"source":"react-router","imported":["browserHistory"],"specifiers":[{"kind":"named","imported":"browserHistory","local":"browserHistory"}]},{"source":"react-router","imported":["Link"],"specifiers":[{"kind":"named","imported":"Link","local":"Link"}]},{"source":"./api/TempUpload.js","imported":["TempTicketImages"],"specifiers":[{"kind":"named","imported":"TempTicketImages","local":"TempTicketImages"}]},{"source":"./api/TempUpload.js","imported":["TempTicketVideo"],"specifiers":[{"kind":"named","imported":"TempTicketVideo","local":"TempTicketVideo"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/dashboard/ticketManagement/AddImagesVideo.jsx","filenameRelative":"imports/dashboard/ticketManagement/AddImagesVideo.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/ticketManagement/AddImagesVideo.jsx.map","sourceFileName":"imports/dashboard/ticketManagement/AddImagesVideo.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AddImagesVideo"},"ignored":false,"code":"let Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Mongo;\nmodule.watch(require(\"meteor/mongo\"), {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 1);\nlet React, Component;\nmodule.watch(require(\"react\"), {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 2);\nlet render;\nmodule.watch(require(\"react-dom\"), {\n  render(v) {\n    render = v;\n  }\n\n}, 3);\nlet TrackerReact;\nmodule.watch(require(\"meteor/ultimatejs:tracker-react\"), {\n  default(v) {\n    TrackerReact = v;\n  }\n\n}, 4);\nlet withTracker;\nmodule.watch(require(\"meteor/react-meteor-data\"), {\n  withTracker(v) {\n    withTracker = v;\n  }\n\n}, 5);\nlet Validation;\nmodule.watch(require(\"react-validation\"), {\n  default(v) {\n    Validation = v;\n  }\n\n}, 6);\nlet validator;\nmodule.watch(require(\"validator\"), {\n  default(v) {\n    validator = v;\n  }\n\n}, 7);\nlet Tracker;\nmodule.watch(require(\"meteor/tracker\"), {\n  Tracker(v) {\n    Tracker = v;\n  }\n\n}, 8);\nlet browserHistory;\nmodule.watch(require(\"react-router\"), {\n  browserHistory(v) {\n    browserHistory = v;\n  }\n\n}, 9);\nlet Link;\nmodule.watch(require(\"react-router\"), {\n  Link(v) {\n    Link = v;\n  }\n\n}, 10);\nlet TempTicketImages;\nmodule.watch(require(\"./api/TempUpload.js\"), {\n  TempTicketImages(v) {\n    TempTicketImages = v;\n  }\n\n}, 11);\nlet TempTicketVideo;\nmodule.watch(require(\"./api/TempUpload.js\"), {\n  TempTicketVideo(v) {\n    TempTicketVideo = v;\n  }\n\n}, 12);\n\nclass AddImagesVideo extends TrackerReact(Component) {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"remark\": ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleUpload(event) {\n    event.preventDefault();\n    let self = this; // this.setState({isUploading: true});\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var dataImg = event.currentTarget.files[0];\n\n      if (dataImg.type == \"image/jpeg\" || dataImg.type == \"image/png\") {\n        var reader = new FileReader();\n\n        reader.onload = function (e) {// $('.uploadedImageFromLocl').attr('src', e.target.result);      \n        };\n\n        reader.readAsDataURL(event.currentTarget.files[0]);\n        var file = event.currentTarget.files[0];\n\n        if (file) {\n          addImgsToS3Function(file, self);\n        }\n      } else {\n        swal({\n          position: 'top-right',\n          type: 'error',\n          title: 'Please select image',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      }\n    }\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  handleVideoUpload(event) {\n    event.preventDefault();\n    let self = this;\n\n    if (event.currentTarget.files && event.currentTarget.files[0]) {\n      var dataImg = event.currentTarget.files[0];\n\n      if (dataImg.type == \"video/mp4\") {\n        var reader = new FileReader();\n\n        reader.onload = function (e) {// $('.uploadedImageFromLocl').attr('src', e.target.result);       \n        };\n\n        reader.readAsDataURL(event.currentTarget.files[0]);\n        var file = event.currentTarget.files[0];\n\n        if (file) {\n          addTicketVideoS3Function(file, self);\n        }\n      } else {\n        swal({\n          position: 'top-right',\n          type: 'error',\n          title: 'Please select Video',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      }\n    }\n  }\n\n  submitImageVideo(event) {\n    event.preventDefault();\n    var userId = this.props.ticket.userId;\n    var documents = {\n      images: this.props.ticketImages,\n      videos: this.props.ticketVideo,\n      remark: this.refs.remark.value\n    };\n    console.log(\"documents\", documents);\n    var ticketElementObj = {};\n\n    if (this.props.ticket) {\n      if (this.props.ticket.ticketElement) {\n        if (this.props.ticket.ticketElement.length > 0) {\n          ticketElementObj = this.props.ticket.ticketElement[this.props.ticket.ticketElement.length - 1];\n          console.log(\"ticketElementObj = \", ticketElementObj);\n        }\n      }\n\n      if (this.props.ticket.addressType == \"permanentAddress\") {} else if (this.props.ticket.addressType == \"currentAddress\") {\n        var currentAddressId = ticketElementObj.currentAddress.currentAddressId;\n        console.log(\"currentAddressId\", currentAddressId);\n        Meteor.call('addCurrentDocuments', userId, documents, currentAddressId, function (error, result) {\n          if (error) {\n            console.log(error.reason);\n          } else {\n            console.log(\"added successfully\");\n            $(\"#remark\").val('');\n            $(\"#AddImagesVideo\").css({\n              \"display\": \"none\"\n            });\n          }\n        });\n      }\n    }\n  }\n\n  render() {\n    // console.log(\"ticket\",this.props.ticket);\n    return React.createElement(\n      \"div\",\n      null,\n      React.createElement(\n        \"div\",\n        {\n          className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 choosefilebox\"\n        },\n        React.createElement(\n          \"form\",\n          null,\n          React.createElement(\n            \"div\",\n            {\n              className: \"col-lg-12 wholeborder \"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"imgtitile col-lg-12 noLRPad\"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"col-lg-12  noLRPad Selectimg\"\n                },\n                \" Select images:\"\n              ),\n              React.createElement(\"input\", {\n                type: \"file\",\n                ref: \"ticketImageFile\",\n                id: \"s3file\",\n                name: \"ticketImageFile\",\n                onChange: this.handleUpload.bind(this),\n                className: \"col-lg-7 noLRPad\",\n                name: \"img\",\n                multiple: true\n              })\n            ),\n            !this.props.loading ? React.createElement(\n              \"div\",\n              {\n                className: \"col-lg-12 imgbox\"\n              },\n              this.props.ticketImages ? this.props.ticketImages.map((ticketImages, index) => {\n                return React.createElement(\n                  \"div\",\n                  {\n                    className: \"col-lg-3 imgbrPre\",\n                    key: index\n                  },\n                  React.createElement(\n                    \"div\",\n                    {\n                      className: \"imgbr\"\n                    },\n                    React.createElement(\"img\", {\n                      src: ticketImages.imageLink,\n                      className: \"img1 img-responsive\"\n                    }),\n                    \"          \"\n                  )\n                );\n              }) : \"\"\n            ) : \"\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"col-lg-12 wholeborder\"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"imgtitile col-lg-12  noLRPad\"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"col-lg-12 noLRPad Selectimg\"\n                },\n                \" Select Video:\"\n              ),\n              React.createElement(\"input\", {\n                type: \"file\",\n                ref: \"ticketVideoFile\",\n                id: \"s3file\",\n                name: \"ticketVideoFile\",\n                onChange: this.handleVideoUpload.bind(this),\n                className: \"col-lg-7 noLRPad\",\n                name: \"img\",\n                multiple: true\n              })\n            ),\n            !this.props.loading1 ? React.createElement(\n              \"div\",\n              {\n                className: \"col-lg-12 imgbox\"\n              },\n              this.props.ticketVideo ? this.props.ticketVideo.map((ticketVideo, index) => {\n                return React.createElement(\n                  \"div\",\n                  {\n                    className: \"col-lg-4 imgbrvid\",\n                    key: index\n                  },\n                  React.createElement(\n                    \"video\",\n                    {\n                      width: \"200\",\n                      height: \"200\",\n                      controls: true\n                    },\n                    React.createElement(\"source\", {\n                      src: ticketVideo.videoLink,\n                      type: \"video/mp4\"\n                    })\n                  )\n                );\n              }) : \"\"\n            ) : \"\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"col-lg-12 wholeborder\"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"imgtitile col-lg-12  noLRPad\"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"col-lg-12 noLRPad Selectimg\"\n                },\n                \"Remark:\"\n              )\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12  noLRPad\"\n              },\n              React.createElement(\"textarea\", {\n                className: \"form-control col-lg-12 col-sm-12 col-md-12 col-xs-12\",\n                name: \"remark\",\n                ref: \"remark\",\n                id: \"remark\",\n                onChange: this.handleChange,\n                rows: \"5\",\n                id: \"remark\"\n              })\n            )\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"col-lg-12 wholeborder text-center\"\n            },\n            React.createElement(\n              \"button\",\n              {\n                type: \"submit\",\n                onClick: this.submitImageVideo.bind(this),\n                className: \"btn btn-primary\"\n              },\n              \"Submit\"\n            )\n          )\n        )\n      )\n    );\n  }\n\n}\n\nAddImagesVideoContainer = withTracker(props => {\n  const postHandle = Meteor.subscribe('allTicketImages');\n  const postHandle1 = Meteor.subscribe('allTicketVideo');\n  const ticketImages = TempTicketImages.find({}).fetch() || [];\n  console.log(\"ticketImages\", ticketImages);\n  const ticketVideo = TempTicketVideo.find({}).fetch() || [];\n  console.log(\"ticketVideo\", ticketVideo);\n  const loading = !postHandle.ready();\n  const loading1 = !postHandle1.ready();\n  const ticket = props.ticket;\n  console.log(\"ticket\", ticket); // if(_id){\n\n  return {\n    loading: loading,\n    loading1: loading1,\n    ticketImages: ticketImages,\n    ticketVideo: ticketVideo,\n    ticket: ticket\n  };\n})(AddImagesVideo);\nmodule.exportDefault(AddImagesVideoContainer);","map":{"version":3,"sources":["imports/dashboard/ticketManagement/AddImagesVideo.jsx"],"names":["Meteor","module","watch","require","v","Mongo","React","Component","default","render","TrackerReact","withTracker","Validation","validator","Tracker","browserHistory","Link","TempTicketImages","TempTicketVideo","AddImagesVideo","constructor","props","state","handleChange","bind","handleUpload","event","preventDefault","self","currentTarget","files","dataImg","type","reader","FileReader","onload","e","readAsDataURL","file","addImgsToS3Function","swal","position","title","showConfirmButton","timer","target","name","setState","value","handleVideoUpload","addTicketVideoS3Function","submitImageVideo","userId","ticket","documents","images","ticketImages","videos","ticketVideo","remark","refs","console","log","ticketElementObj","ticketElement","length","addressType","currentAddressId","currentAddress","call","error","result","reason","$","val","css","loading","map","index","imageLink","loading1","videoLink","AddImagesVideoContainer","postHandle","subscribe","postHandle1","find","fetch","ready","exportDefault"],"mappings":"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","file":"imports/dashboard/ticketManagement/AddImagesVideo.jsx.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport TrackerReact from 'meteor/ultimatejs:tracker-react';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport Validation from 'react-validation';\nimport validator from 'validator';\nimport {Tracker} from 'meteor/tracker';\nimport { browserHistory } from 'react-router'; \nimport { Link } from 'react-router';\nimport { TempTicketImages } from './api/TempUpload.js';\nimport { TempTicketVideo } from './api/TempUpload.js';\nclass AddImagesVideo extends TrackerReact(Component){\n\t constructor(props){\n    super(props);\n    this.state = { \n      \"remark\" : '',\n    }\n    this.handleChange = this.handleChange.bind(this);\n  }\n  handleUpload(event){\n    event.preventDefault();\n    let self = this;\n     // this.setState({isUploading: true});\n    if (event.currentTarget.files && event.currentTarget.files[0]) { \n      var dataImg =event.currentTarget.files[0];  \n       if(dataImg.type == \"image/jpeg\" || dataImg.type == \"image/png\"){      \n         var reader = new FileReader();        reader.onload = function (e) {          \n           // $('.uploadedImageFromLocl').attr('src', e.target.result);      \n         };       \n         reader.readAsDataURL(event.currentTarget.files[0]);      \n         var file = event.currentTarget.files[0];      \n          if (file) {         \n            addImgsToS3Function(file,self);       \n          }   \n       } else { \n        swal({    \n           position: 'top-right',     \n           type: 'error',    \n           title: 'Please select image',       \n           showConfirmButton: false,      \n           timer: 1500      \n         });   \n      }\n    }\n  }\n  handleChange(event){\n   event.preventDefault();\n   const target = event.target;\n   const name   = target.name;\n   this.setState({\n    [name]: event.target.value,\n   });\n  }\n  handleVideoUpload(event){\n    event.preventDefault();\n    let self = this;\n    if (event.currentTarget.files && event.currentTarget.files[0]) {  \n      var dataImg =event.currentTarget.files[0];   \n       if(dataImg.type == \"video/mp4\"){       \n         var reader = new FileReader();        \n          reader.onload = function (e) {           \n           // $('.uploadedImageFromLocl').attr('src', e.target.result);       \n         };        \n         reader.readAsDataURL(event.currentTarget.files[0]);       \n         var file = event.currentTarget.files[0];       \n          if (file) {          \n            addTicketVideoS3Function(file,self);        \n          }    \n       } else {  \n        swal({     \n           position: 'top-right',      \n           type: 'error',     \n           title: 'Please select Video',        \n           showConfirmButton: false,       \n           timer: 1500       \n         });    \n      }\n    }\n  }\n  submitImageVideo(event){\n    event.preventDefault();\n    var userId = this.props.ticket.userId;\n    var documents ={\n       images : this.props.ticketImages,\n       videos : this.props.ticketVideo,\n       remark : this.refs.remark.value,\n    }\n    console.log(\"documents\",documents);\n    var ticketElementObj = {};\n   if (this.props.ticket) {\n      if (this.props.ticket.ticketElement) {\n        if (this.props.ticket.ticketElement.length > 0) {\n            ticketElementObj  = this.props.ticket.ticketElement[this.props.ticket.ticketElement.length-1];\n            console.log(\"ticketElementObj = \",ticketElementObj);      \n        }\n      }\n      if (this.props.ticket.addressType == \"permanentAddress\") {   \n        \n        \n     }else if (this.props.ticket.addressType == \"currentAddress\") {\n         var currentAddressId = ticketElementObj.currentAddress.currentAddressId;\n         console.log(\"currentAddressId\",currentAddressId);\n         Meteor.call('addCurrentDocuments',userId,documents,currentAddressId,function(error,result) {\n           if (error) {\n            console.log(error.reason);\n           }else{\n             console.log(\"added successfully\");\n             $(\"#remark\").val('');\n             $(\"#AddImagesVideo\").css({\"display\" : \"none\"});\n           }\n         });\n        \n      }\n    }\n  }\n\trender(){\n    // console.log(\"ticket\",this.props.ticket);\n     return( \n      <div>\n       <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 choosefilebox\">\n        <form>\n\t        <div className=\"col-lg-12 wholeborder \">\n\t\t          <div className=\"imgtitile col-lg-12 noLRPad\">\n\t\t\t          <div className=\"col-lg-12  noLRPad Selectimg\"> Select images:</div> \n\t\t\t\t          <input type=\"file\" ref=\"ticketImageFile\" id=\"s3file\" name=\"ticketImageFile\"  onChange={this.handleUpload.bind(this)} className=\"col-lg-7 noLRPad\" name=\"img\" multiple />\n\t\t\t        </div> \n            {!this.props.loading ?\n            \t<div className=\"col-lg-12 imgbox\">\n               {this.props.ticketImages ?\n               \t this.props.ticketImages.map((ticketImages,index) =>{\n               \t \t return(\n               \t \t \t  <div className=\"col-lg-3 imgbrPre\" key={index}>\n\t\t\t\t\t\t\t\t        <div className=\"imgbr\">\n\t\t\t\t\t\t\t\t          <img src={ticketImages.imageLink} className=\"img1 img-responsive\" />\n\t\t\t\t{/*\t\t\t\t        <i className=\"fa fa-times-circle\"></i>\n\t\t\t\t*/}\t\t\t\t      </div>\n\t\t\t\t\t\t\t        </div>\n               \t \t \t);\n               \t })\n               \t :\n               \t \"\"\n               }\n\t\t\t\t        \n\t\t\t        </div>\n\t\t\t        :\n              \"\"\n            }\n\t          \n\t       </div>\n\t      <div className=\"col-lg-12 wholeborder\">\n\t        <div className=\"imgtitile col-lg-12  noLRPad\">\n\t          <div className=\"col-lg-12 noLRPad Selectimg\"> Select Video:</div> \n\t\t\t\t      <input type=\"file\" ref=\"ticketVideoFile\" id=\"s3file\" name=\"ticketVideoFile\"  onChange={this.handleVideoUpload.bind(this)} className=\"col-lg-7 noLRPad\" name=\"img\" multiple />\n\t          {/*<input type=\"submit\" className=\"col-lg-1 btn btn-primary\" />*/}\n\t          </div>\n\n\t         {!this.props.loading1 ?\n            \t<div className=\"col-lg-12 imgbox\">\n               {this.props.ticketVideo ?\n               \t this.props.ticketVideo.map((ticketVideo,index) =>{\n               \t \t return(\n               \t \t \t  <div className=\"col-lg-4 imgbrvid\" key={index}>\n\t\t\t\t\t\t\t\t          <video width=\"200\" height=\"200\"  controls>\n\t\t\t\t\t\t\t\t\t          <source src={ticketVideo.videoLink} type=\"video/mp4\" />\n\t\t\t\t\t\t\t\t\t        </video>\n\t\t\t\t\t\t\t        </div>\n               \t \t \t);\n               \t })\n               \t :\n               \t \"\"\n               }\n\t\t\t\t        \n\t\t\t        </div>\n\t\t\t        :\n              \"\"\n            }\n\n\t      </div>\n\t      <div className=\"col-lg-12 wholeborder\">\n\t          <div className=\"imgtitile col-lg-12  noLRPad\">\n\t            <div className=\"col-lg-12 noLRPad Selectimg\">Remark:</div> \n            </div>\n            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12  noLRPad\">\n               <textarea className=\"form-control col-lg-12 col-sm-12 col-md-12 col-xs-12\" name=\"remark\" ref=\"remark\" id=\"remark\" onChange={this.handleChange} rows=\"5\" id=\"remark\"></textarea>\t          \n            </div>\n\t      </div>\n\t      <div className=\"col-lg-12 wholeborder text-center\">\n\t         <button type=\"submit\" onClick={this.submitImageVideo.bind(this)} className=\"btn btn-primary\">Submit</button>\n\t      </div>\n\n       </form>\n      </div>\n\n     </div>\n     ); \n   }        \n}\nAddImagesVideoContainer = withTracker(props => {  \n\n    const postHandle   = Meteor.subscribe('allTicketImages');\n    const postHandle1  = Meteor.subscribe('allTicketVideo');\n    const ticketImages = TempTicketImages.find({}).fetch() || [];  \n    console.log(\"ticketImages\",ticketImages);\n    const ticketVideo = TempTicketVideo.find({}).fetch() || [];  \n    console.log(\"ticketVideo\",ticketVideo);\n    const loading     = !postHandle.ready();\n    const loading1    = !postHandle1.ready();\n    const ticket      = props.ticket;\n    console.log(\"ticket\",ticket);\n\n    // if(_id){\n      return {\n          loading : loading,\n          loading1 : loading1,\n          ticketImages : ticketImages,\n          ticketVideo  : ticketVideo,\n          ticket   : ticket,\n      };\n})(AddImagesVideo);\nexport default AddImagesVideoContainer;"]},"hash":"7f110ac80c6baa3867d0f1d3e9c410e5e3573869"}
