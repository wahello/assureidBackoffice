{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-dom","imported":["render"],"specifiers":[{"kind":"named","imported":"render","local":"render"}]},{"source":"meteor/ultimatejs:tracker-react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TrackerReact"}]},{"source":"/imports/dashboard/reactCMS/api/Services.js","imported":["Services"],"specifiers":[{"kind":"named","imported":"Services","local":"Services"}]}],"exports":{"exported":["CreateUser"],"specifiers":[{"kind":"local","local":"CreateUser","exported":"default"}]}}},"options":{"filename":"imports/dashboard/userManagement/CreateUser.jsx","filenameRelative":"imports/dashboard/userManagement/CreateUser.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/userManagement/CreateUser.jsx.map","sourceFileName":"imports/dashboard/userManagement/CreateUser.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"CreateUser"},"ignored":false,"code":"module.export({\n  default: () => CreateUser\n});\nlet React, Component;\nmodule.watch(require(\"react\"), {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet render;\nmodule.watch(require(\"react-dom\"), {\n  render(v) {\n    render = v;\n  }\n\n}, 1);\nlet TrackerReact;\nmodule.watch(require(\"meteor/ultimatejs:tracker-react\"), {\n  default(v) {\n    TrackerReact = v;\n  }\n\n}, 2);\nlet Services;\nmodule.watch(require(\"/imports/dashboard/reactCMS/api/Services.js\"), {\n  Services(v) {\n    Services = v;\n  }\n\n}, 3);\n\nclass CreateUser extends TrackerReact(Component) {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"roleList\": [],\n      \"service\": [],\n      \"userList\": [],\n      \"userUniqueData\": [],\n      \"userSubscribe\": Meteor.subscribe('userfunction')\n    };\n  }\n\n  createUser(event) {\n    event.preventDefault();\n    var reportrefValue = this.refs.reportToRef.value;\n    console.log(\"reportrefValue :\" + reportrefValue);\n    var splitValue = reportrefValue.split(\"(\");\n    var reportToRole = splitValue[0];\n    var reportToName = splitValue[1].slice(0, -1);\n    var formValues = {\n      'firstname': this.refs.firstname.value,\n      'lastname': this.refs.lastname.value,\n      'signupEmail': this.refs.signupEmail.value,\n      'mobNumber': this.refs.mobNumber.value,\n      'servicesName': this.refs.servicesRef.value,\n      'reportToRole': reportToRole,\n      'reportToName': reportToName,\n      'signupPassword': \"user123\"\n    };\n    var assignedrole = this.refs.roleRef.value;\n    var defaultRoleWith = [\"backofficestaff\"];\n    defaultRoleWith.push(assignedrole);\n    Meteor.call('userCreateAccount', formValues, (error, result) => {\n      if (error) {\n        swal(error.reason);\n      } else {\n        // CLEAR ALL FIELDS\n        this.refs.firstname.value = '';\n        this.refs.lastname.value = '';\n        this.refs.signupEmail.value = '';\n        this.refs.mobNumber.value = ''; // ADD USER ROLE \n\n        var newID = result;\n        Meteor.call('addRoles', newID, defaultRoleWith, function (error, result) {\n          if (error) {\n            swal(error);\n          } else {\n            swal('Congratulations!! Account Created...');\n          }\n        }); // add role\n      } //end else\n\n    });\n    return 0;\n  }\n\n  componentDidMount() {\n    // $(\"#signUpUser\").validate();\n    $(\"html,body\").scrollTop(0);\n\n    if (!$(\"#adminLte\").length > 0 && !$('body').hasClass('adminLte')) {\n      var adminLte = document.createElement(\"script\");\n      adminLte.type = \"text/javascript\";\n      adminLte.src = \"/js/adminLte.js\";\n      $(\"body\").append(adminLte);\n    }\n\n    this.serviceTracker = Tracker.autorun(() => {\n      var handle = Meteor.subscribe(\"services\");\n\n      if (handle.ready()) {\n        var services = Services.find({}, {\n          field: {\n            'serviceName': 1\n          }\n        }).fetch();\n        this.setState({\n          \"service\": services\n        });\n      }\n    });\n    this.roleTracker = Tracker.autorun(() => {\n      var handle = Meteor.subscribe(\"rolefunction\");\n\n      if (handle.ready()) {\n        if (this.state.userSubscribe.ready()) {\n          var allusers = Meteor.users.find({\n            \"roles\": {\n              $nin: [\"user\", \"superAdmin\", \"admin\"]\n            }\n          }).fetch();\n          var allRoles = Meteor.roles.find({}).fetch();\n          console.log(\"allusers :\" + allusers);\n          console.log(\"allRoles :\" + allRoles);\n\n          if (allusers.length > 0 && allRoles.length > 0) {\n            var newArr = []; // console.log(\"allusers: \",allusers);\n\n            for (var i = 0; i < allusers.length; i++) {\n              var currentText = allusers[i].profile.firstname + \" \" + allusers[i].profile.lastname;\n              var reportName = allusers[i].profile.firstname + \" \" + allusers[i].profile.lastname;\n              var userLen = allusers[i].roles;\n\n              if (userLen.length) {\n                for (k = 0; k < userLen.length; k++) {\n                  if (userLen[k] != \"backofficestaff\") {\n                    currentText = userLen[k] + \"(\" + currentText + \")\";\n                  }\n                }\n              }\n\n              newArr.push(currentText);\n            }\n\n            var roleArray = [];\n\n            for (var j = 0; j < allRoles.length; j++) {\n              if (allRoles[j].name != \"superAdmin\" && allRoles[j].name != \"admin\" && allRoles[j].name != \"user\") {\n                var rolevalue = allRoles[j].name;\n                roleArray.push(rolevalue);\n              }\n            }\n\n            this.setState({\n              \"roles\": allRoles,\n              \"userUniqueData\": newArr,\n              \"roleList\": roleArray,\n              \"reporttoName\": reportName\n            });\n            console.log(\"roleList :\" + JSON.stringify(this.state.userUniqueData));\n            console.log(\"roleList :\" + JSON.stringify(this.state.roleList));\n          }\n        }\n      }\n    });\n  }\n\n  componentWillMount() {// if (!!!$(\"link[href='/css/dashboard.css']\").length > 0) {\n    //   var dashboardCss = document.createElement(\"link\");\n    //   dashboardCss.type = \"text/css\"; \n    //   dashboardCss.rel = \"stylesheet\";\n    //   dashboardCss.href = \"/css/dashboard.css\"; \n    //   document.head.append(dashboardCss);\n    // }\n  }\n\n  componentWillUnmount() {\n    $(\"script[src='/js/adminLte.js']\").remove(); // $(\"link[href='/css/dashboard.css']\").remove(); \n  }\n\n  render() {\n    return React.createElement(\n      \"section\",\n      {\n        className: \"content-wrapper\"\n      },\n      React.createElement(\n        \"div\",\n        {\n          className: \"content\"\n        },\n        React.createElement(\n          \"div\",\n          {\n            className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12\"\n          },\n          React.createElement(\n            \"div\",\n            {\n              className: \"box box-primary\"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"box-header with-border\"\n              },\n              React.createElement(\n                \"h2\",\n                {\n                  className: \"box-title\"\n                },\n                \"CREATE USER\"\n              )\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"box-body \"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"col-lg-12 col-sm-12 col-xs-12 col-md-12\"\n                },\n                React.createElement(\n                  \"form\",\n                  {\n                    id: \"signUpUser\",\n                    onSubmit: this.createUser.bind(this)\n                  },\n                  React.createElement(\n                    \"div\",\n                    {\n                      className: \"signupBody col-lg-12 col-md-8 col-sm-12 col-xs-12\"\n                    },\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"blocking-span\"\n                        },\n                        React.createElement(\n                          \"label\",\n                          {\n                            className: \"floating-label\"\n                          },\n                          \"First Name\"\n                        ),\n                        React.createElement(\"input\", {\n                          type: \"text\",\n                          title: \"Only alphabets are allowed!\",\n                          className: \"form-control inputText\",\n                          ref: \"firstname\",\n                          name: \"firstname\",\n                          pattern: \"[a-zA-Z][a-zA-Z ]+\",\n                          required: true\n                        })\n                      )\n                    ),\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"blocking-span\"\n                        },\n                        React.createElement(\n                          \"label\",\n                          {\n                            className: \"floating-label\"\n                          },\n                          \"Last Name\"\n                        ),\n                        React.createElement(\"input\", {\n                          type: \"text\",\n                          title: \"Please enter alphabets only!\",\n                          className: \"form-control inputText\",\n                          ref: \"lastname\",\n                          name: \"lastname\",\n                          pattern: \"[A-Za-z]+\",\n                          required: true\n                        })\n                      )\n                    ),\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"blocking-span\"\n                        },\n                        React.createElement(\n                          \"label\",\n                          {\n                            className: \"floating-label\"\n                          },\n                          \"Email ID\"\n                        ),\n                        React.createElement(\"input\", {\n                          type: \"email\",\n                          title: \"Please match email format!\",\n                          className: \"form-control signupsetting inputText\",\n                          ref: \"signupEmail\",\n                          name: \"signupEmail\",\n                          required: true\n                        })\n                      )\n                    ),\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"blocking-span\"\n                        },\n                        React.createElement(\n                          \"label\",\n                          {\n                            className: \"floating-label\"\n                          },\n                          \"Phone Number\"\n                        ),\n                        React.createElement(\"input\", {\n                          type: \"text\",\n                          pattern: \"^(0|[1-9][0-9]*)$\",\n                          title: \"Please enter numbers only!\",\n                          className: \"form-control inputText\",\n                          ref: \"mobNumber\",\n                          name: \"mobNumber\",\n                          required: true\n                        })\n                      )\n                    ),\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"blocking-span\"\n                        },\n                        React.createElement(\n                          \"label\",\n                          {\n                            className: \"floating-label\"\n                          },\n                          \"Assign Service\"\n                        ),\n                        React.createElement(\n                          \"select\",\n                          {\n                            className: \"form-control allProductSubCategories\",\n                            \"aria-describedby\": \"basic-addon1\",\n                            ref: \"servicesRef\"\n                          },\n                          this.state.service.map((data, index) => {\n                            return React.createElement(\n                              \"option\",\n                              {\n                                key: index\n                              },\n                              data.serviceName\n                            );\n                          })\n                        )\n                      )\n                    ),\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"blocking-span\"\n                        },\n                        React.createElement(\n                          \"label\",\n                          {\n                            className: \"floating-label\"\n                          },\n                          \"Assign Role\"\n                        ),\n                        React.createElement(\n                          \"select\",\n                          {\n                            className: \"form-control allProductSubCategories\",\n                            \"aria-describedby\": \"basic-addon1\",\n                            ref: \"roleRef\"\n                          },\n                          this.state.roleList.map((data, index) => {\n                            return React.createElement(\n                              \"option\",\n                              {\n                                key: index\n                              },\n                              data\n                            );\n                          })\n                        )\n                      )\n                    ),\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"blocking-span\"\n                        },\n                        React.createElement(\n                          \"label\",\n                          {\n                            className: \"floating-label\"\n                          },\n                          \"Reporting To\"\n                        ),\n                        React.createElement(\n                          \"select\",\n                          {\n                            className: \"form-control allProductSubCategories\",\n                            \"aria-describedby\": \"basic-addon1\",\n                            ref: \"reportToRef\"\n                          },\n                          this.state.userUniqueData.map((data, index) => {\n                            return React.createElement(\n                              \"option\",\n                              {\n                                key: index\n                              },\n                              data\n                            );\n                          })\n                        )\n                      )\n                    ),\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 \"\n                      },\n                      React.createElement(\"input\", {\n                        className: \"col-lg-3 col-md-4 col-xs-12 col-sm-12 col-xs-12 btn btn-primary pull-right\",\n                        type: \"submit\",\n                        value: \"REGISTER\"\n                      })\n                    )\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    );\n  }\n\n}","map":{"version":3,"sources":["imports/dashboard/userManagement/CreateUser.jsx"],"names":["module","export","default","CreateUser","React","Component","watch","require","v","render","TrackerReact","Services","constructor","props","state","Meteor","subscribe","createUser","event","preventDefault","reportrefValue","refs","reportToRef","value","console","log","splitValue","split","reportToRole","reportToName","slice","formValues","firstname","lastname","signupEmail","mobNumber","servicesRef","assignedrole","roleRef","defaultRoleWith","push","call","error","result","swal","reason","newID","componentDidMount","$","scrollTop","length","hasClass","adminLte","document","createElement","type","src","append","serviceTracker","Tracker","autorun","handle","ready","services","find","field","fetch","setState","roleTracker","userSubscribe","allusers","users","$nin","allRoles","roles","newArr","i","currentText","profile","reportName","userLen","k","roleArray","j","name","rolevalue","JSON","stringify","userUniqueData","roleList","componentWillMount","componentWillUnmount","remove","bind","service","map","data","index","serviceName"],"mappings":"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","file":"imports/dashboard/userManagement/CreateUser.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport TrackerReact from 'meteor/ultimatejs:tracker-react';\nimport {Services} from '/imports/dashboard/reactCMS/api/Services.js';\n\nexport default class CreateUser extends TrackerReact(Component) {\n\n  constructor(props){\n    super(props);\n    this.state={\n      \"roleList\" :[],\n      \"service\" :[],\n      \"userList\" :[],\n      \"userUniqueData\":[],\n      \"userSubscribe\": Meteor.subscribe('userfunction'),\n    }\n  }\n\tcreateUser(event){\n\t\tevent.preventDefault();\n        var reportrefValue = this.refs.reportToRef.value;\n        console.log(\"reportrefValue :\"+reportrefValue);\n        var splitValue   =  reportrefValue.split(\"(\");\n        var reportToRole = splitValue[0];\n        var reportToName = splitValue[1].slice(0, -1);\n        \n        var formValues = {\n                          'firstname'        : this.refs.firstname.value,\n                          'lastname'         : this.refs.lastname.value,\n                          'signupEmail'      : this.refs.signupEmail.value,\n                          'mobNumber'        : this.refs.mobNumber.value,\n                          'servicesName'     : this.refs.servicesRef.value,\n                          'reportToRole'         : reportToRole,\n                          'reportToName'     : reportToName,\n                          'signupPassword'   : \"user123\",\n                        }   \n        var assignedrole = this.refs.roleRef.value; \n        var defaultRoleWith = [\"backofficestaff\"];\n        defaultRoleWith.push(assignedrole);\n        \n        \n        Meteor.call('userCreateAccount', formValues ,(error,result) => {\n          if(error){ \n            swal(error.reason);\n          }else{      \n\n          \t// CLEAR ALL FIELDS\n            this.refs.firstname.value      = '';\n            this.refs.lastname.value       = '';\n            this.refs.signupEmail.value    = '';\n            this.refs.mobNumber.value      = '';\n\n\n            // ADD USER ROLE \n            var newID = result;\n            Meteor.call('addRoles', newID , defaultRoleWith, function(error,result){\n              if(error){\n                swal(error);\n              }else{              \t\n\t\t\t\tswal('Congratulations!! Account Created...');\n              }\n            }); // add role\n\t\t            \n          } //end else\n        });\n\n    return 0;  \t\n\n\t}\n\n\t componentDidMount() {\n\t \t// $(\"#signUpUser\").validate();\n\t \t    $(\"html,body\").scrollTop(0);\n    if (!$(\"#adminLte\").length>0 && !$('body').hasClass('adminLte')) {\n     var adminLte = document.createElement(\"script\");  \n     adminLte.type=\"text/javascript\";  \n     adminLte.src = \"/js/adminLte.js\";  \n     $(\"body\").append(adminLte);  \n    }\n\n    this.serviceTracker = Tracker.autorun( ()=> {\n      var handle = Meteor.subscribe(\"services\");\n      if(handle.ready()){\n        var services = Services.find({},{field:{'serviceName':1}}).fetch();\n       \n        this.setState({\n          \"service\": services,\n        });\n      }\n    });\n\n    this.roleTracker = Tracker.autorun( ()=> {\n      var handle = Meteor.subscribe(\"rolefunction\");\n    \n      if(handle.ready()){\n        if(this.state.userSubscribe.ready()){\n          var allusers = Meteor.users.find({\"roles\":{$nin:[\"user\",\"superAdmin\",\"admin\"]}}).fetch();\n          var allRoles = Meteor.roles.find({}).fetch();\n          console.log(\"allusers :\"+allusers);\n          console.log(\"allRoles :\"+allRoles);\n          \n          \n          if(allusers.length >0 && allRoles.length >0){\n            var newArr = [];\n            // console.log(\"allusers: \",allusers);\n            for(var i=0;i<allusers.length;i++){\n              \n              var currentText = allusers[i].profile.firstname +\" \"+ allusers[i].profile.lastname;\n              var reportName  = allusers[i].profile.firstname +\" \"+ allusers[i].profile.lastname;\n              var userLen = allusers[i].roles;\n              if(userLen.length){\n                for(k=0;k<userLen.length;k++){\n                  if(userLen[k]!=\"backofficestaff\"){\n                    currentText = userLen[k] +\"(\"+currentText+\")\" ;\n                  }\n                }\n              }\n             \n              newArr.push(currentText);\n            }\n            var roleArray = [];\n            for(var j=0;j<allRoles.length;j++){\n              if((allRoles[j].name!=\"superAdmin\") && (allRoles[j].name!= \"admin\") && (allRoles[j].name!= \"user\"))  {\n\n                var rolevalue = allRoles[j].name;\n                roleArray.push(rolevalue);\n              }\n            }\n            \n\n            this.setState({\n              \"roles\": allRoles,\n              \"userUniqueData\":newArr,\n              \"roleList\"      : roleArray,\n              \"reporttoName\"  : reportName\n           \n          });   \n          \n          console.log(\"roleList :\"+JSON.stringify(this.state.userUniqueData));\n          console.log(\"roleList :\"+JSON.stringify(this.state.roleList));\n          }\n         \n        }\n      }\n   \n    });\n\n\n\t }\n   componentWillMount() {\n    // if (!!!$(\"link[href='/css/dashboard.css']\").length > 0) {\n    //   var dashboardCss = document.createElement(\"link\");\n    //   dashboardCss.type = \"text/css\"; \n    //   dashboardCss.rel = \"stylesheet\";\n    //   dashboardCss.href = \"/css/dashboard.css\"; \n    //   document.head.append(dashboardCss);\n    // }\n  }\n   componentWillUnmount(){  \n     $(\"script[src='/js/adminLte.js']\").remove(); \n     // $(\"link[href='/css/dashboard.css']\").remove(); \n   }\n\n\n\trender() {\n\n       return (\n\n       \t<section className=\"content-wrapper\">\n        <div className=\"content\">\n          <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n            <div className=\"box box-primary\">\n              <div className=\"box-header with-border\">\n               <h2 className=\"box-title\">CREATE USER</h2>\n              </div>\n           \n\t            <div className=\"box-body \">\n\t\t\t\t\t\t\t\t<div className=\"col-lg-12 col-sm-12 col-xs-12 col-md-12\">\n\t\t\t\t\t\t\t\t  <form id=\"signUpUser\" onSubmit={this.createUser.bind(this)}>\n\t\t\t\t\t\t\t\t\t  <div className=\"signupBody col-lg-12 col-md-8 col-sm-12 col-xs-12\">\n\n\t\t\t\t\t\t\t\t\t   <div className=\"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\">\n\t\t\t\t\t\t\t\t\t   \t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t\t   \t\t  <label className=\"floating-label\">First Name</label>\n\t\t\t\t\t\t\t\t\t\t\t   \t<input type=\"text\" title=\"Only alphabets are allowed!\" className=\"form-control inputText\" ref=\"firstname\" name=\"firstname\" pattern=\"[a-zA-Z][a-zA-Z ]+\" required />\n\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t\t   <div className=\"form-group col-lg-6 col-md-4 col-xs-6 col-sm-6 inputContent\">\n\t\t\t\t\t\t\t\t\t   \t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t\t\t   \t\t <label className=\"floating-label\">Last Name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t   <input type=\"text\" title=\"Please enter alphabets only!\" className=\"form-control inputText\" ref=\"lastname\" name=\"lastname\" pattern=\"[A-Za-z]+\" required />\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t   \t\t<div className=\"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Email ID</label>\n\t\t\t\t\t\t\t\t\t\t\t    <input type=\"email\" title=\"Please match email format!\" className=\"form-control signupsetting inputText\" ref=\"signupEmail\" name=\"signupEmail\" required />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t   \t\t<div className=\"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Phone Number</label>\n\t\t\t\t\t\t\t\t\t\t\t    <input type=\"text\" pattern=\"^(0|[1-9][0-9]*)$\" title=\"Please enter numbers only!\" className=\"form-control inputText\" ref=\"mobNumber\" name=\"mobNumber\" required />\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n                      <div className=\"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Assign Service</label>\n                           {/* <span className=\"input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-gg\" aria-hidden=\"true\"></i></span> */}\n                              <select className=\"form-control allProductSubCategories\" aria-describedby=\"basic-addon1\" ref=\"servicesRef\">\n                                  { this.state.service.map( (data, index)=>{\n                                      return (\n                                          <option key={index}>{data.serviceName}</option>\n                                      );\n                                  })\n                                  }\n                              </select>\n\t\t\t\t\t\t\t\t\t\t  \t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n                      <div className=\"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Assign Role</label>\n                           <select className=\"form-control allProductSubCategories\" aria-describedby=\"basic-addon1\" ref=\"roleRef\">\n                                  { this.state.roleList.map( (data, index)=>{\n                                      return (\n                                          <option key={index}>{data}</option>\n                                      );\n                                  })\n                                  }\n                           </select>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n                      <div className=\"form-group col-lg-4 col-md-4 col-xs-12 col-sm-12 inputContent\">\n\t\t\t\t\t\t\t\t   \t\t\t<span className=\"blocking-span\">\n\t\t\t\t\t\t\t\t   \t\t\t  <label className=\"floating-label\">Reporting To</label>\n                           {/* <span className=\"input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-gg\" aria-hidden=\"true\"></i></span> */}\n                           \n                              <select className=\"form-control allProductSubCategories\" aria-describedby=\"basic-addon1\" ref=\"reportToRef\">\n                                  { this.state.userUniqueData.map( (data, index)=>{\n                                      return (\n                                          <option key={index}>\n                                            \n                                            {data}\n                                          </option>\n                                      );\n                                  })\n                                  }\n                              </select>\n\t\t\t\t\t\t\t\t\t\t  \t</span>\n\t\t\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t\t\t\t<div className=\"form-group col-lg-12 col-md-12 col-xs-12 col-sm-12 \">\n\t\t\t\t\t\t\t\t\t    \t<input className=\"col-lg-3 col-md-4 col-xs-12 col-sm-12 col-xs-12 btn btn-primary pull-right\" type=\"submit\" value=\"REGISTER\"/>\n\t\t\t\t\t\t\t\t\t   </div>\t\n\n\t\t\t\t\t\t\t\t\t  </div> \n\t\t\t\t\t\t\t\t  </form>\n\t\t\t\t\t\t \t \t</div>\t\n\t\t\t\t \t</div>\n\t\t\t \t</div>\n\t\t\t </div>\n\t\t </div>\n\t\t </section>\n\t    );\n\n\t} \n\n}"]},"hash":"9753c547c6ca2ea2262fb773237541a506340c32"}
