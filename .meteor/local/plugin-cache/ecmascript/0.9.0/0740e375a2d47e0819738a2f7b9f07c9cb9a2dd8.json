{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"react-router","imported":["Link"],"specifiers":[{"kind":"named","imported":"Link","local":"Link"}]},{"source":"meteor/accounts-base","imported":["Accounts"],"specifiers":[{"kind":"named","imported":"Accounts","local":"Accounts"}]},{"source":"meteor/mongo","imported":["Mongo"],"specifiers":[{"kind":"named","imported":"Mongo","local":"Mongo"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/tracker","imported":["Tracker"],"specifiers":[{"kind":"named","imported":"Tracker","local":"Tracker"}]}],"exports":{"exported":["UserDashboard"],"specifiers":[{"kind":"local","local":"UserDashboard","exported":"default"}]}}},"options":{"filename":"imports/common/UserDashboard.js","filenameRelative":"imports/common/UserDashboard.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/common/UserDashboard.js.map","sourceFileName":"imports/common/UserDashboard.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"UserDashboard"},"ignored":false,"code":"module.export({\n  default: () => UserDashboard\n});\nlet React;\nmodule.watch(require(\"react\"), {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Link;\nmodule.watch(require(\"react-router\"), {\n  Link(v) {\n    Link = v;\n  }\n\n}, 1);\nlet Accounts;\nmodule.watch(require(\"meteor/accounts-base\"), {\n  Accounts(v) {\n    Accounts = v;\n  }\n\n}, 2);\nlet Mongo;\nmodule.watch(require(\"meteor/mongo\"), {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 3);\nlet Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 4);\nlet Tracker;\nmodule.watch(require(\"meteor/tracker\"), {\n  Tracker(v) {\n    Tracker = v;\n  }\n\n}, 5);\n\nclass UserDashboard extends React.Component {\n  componentWillMount() {\n    if (!$(\"link[href='/css/common.css']\").length > 0) {\n      var commonCss = document.createElement(\"link\");\n      commonCss.type = \"text/css\";\n      commonCss.rel = \"stylesheet\";\n      commonCss.href = \"/css/common.css\";\n      document.head.append(commonCss);\n    }\n\n    if (!$(\"link[href='/css/user.css']\").lenth > 0) {\n      var userCss = document.createElement(\"link\");\n      commonCss.type = \"text/css\";\n      commonCss.rel = \"stylesheet\";\n      commonCss.href = \"/css/user.css\";\n      document.head.append(userCss);\n    }\n  }\n\n  componentWillUnmount() {\n    $(\"link[href='/css/common.css']\").remove();\n    $(\"link[href='/css/user.css']\").remove();\n    this.userDataTracker.stop();\n  }\n\n  constructor(props) {\n    super(props);\n    var metaContext = {\n      dir: \"images\",\n      name: \"avatar\"\n    };\n    var uploader = new Slingshot.Upload(\"myFileUploads\", metaContext);\n    this.state = {\n      upload: uploader,\n      isUploading: false,\n      progressValue: \"0%\",\n      userData: []\n    };\n  }\n\n  calculateProgress() {\n    this.uploadComputation = Tracker.autorun(() => {\n      const uploadProgress = Math.round(this.state.upload.progress() * 100);\n      if (!isNaN(uploadProgress)) this.setState({\n        progressValue: uploadProgress + \"%\"\n      });\n    });\n  }\n\n  handleUpload(e) {\n    e.preventDefault();\n    this.setState({\n      isUploading: true\n    });\n    this.calculateProgress();\n    var comp = this; // console.log(comp);\n\n    this.state.upload.send(document.getElementById('s3file').files[0], function (error, downloadUrl) {\n      if (error) {\n        // Log service detailed response.\n        console.error('Error uploading', error.reason);\n        console.error(error);\n      } else {\n        // console.log(comp);\n        comp.setState({\n          isUploading: false\n        });\n        comp.uploadComputation.stop();\n        comp.setState({\n          progressValue: \"0%\"\n        }); // console.log(comp.state.isUploading);\n        // console.log(comp.state.uploadComputation);\n        // console.log(comp.state.progressValue);\n\n        console.log(\"Success file uploaded! \" + downloadUrl);\n        Meteor.users.update(Meteor.userId(), {\n          $set: {\n            \"profile.image\": downloadUrl\n          }\n        });\n      }\n    });\n  }\n\n  onSubmitDel(e) {\n    e.preventDefault();\n    let user = Meteor.users.findOne(Meteor.userId());\n    Meteor.call('removePhotoData', {\n      image: user.profile.image\n    }, (err, res) => {\n      if (err) {\n        console.log(user.profile.image);\n        console.log(\"delete error\" + err);\n      } else {\n        console.log('Success file deleted.');\n      }\n    });\n  }\n\n  componentDidMount() {\n    var $Menu = $('.Img');\n    $('.Img').mouseenter(function () {\n      $('.PopUp').css('opacity', '1');\n      $('.PopUp').css('margin-top', '20px');\n    });\n    $('.Img').mouseleave(function () {\n      $('.PopUp').css('opacity', '0');\n      $('.PopUp').css('margin-top', '0px');\n    });\n    $('.Img').on('click', function () {\n      if ($Menu.hasClass('Img')) {\n        $('.Img').addClass('click');\n        $('.Img').removeClass('Img');\n        $('.Profile').addClass('clickProfile');\n        $('.Profile').removeClass('Profile');\n        $('.clickPopUp').css('display', 'block');\n        $('.PopUp').css('display', 'none');\n      } else {\n        $('.click').addClass('Img');\n        $('.click').removeClass('click');\n        $('.clickProfile').addClass('Profile');\n        $('.clickProfile').removeClass('clickProfile');\n        $('.clickPopUp').css('display', 'none');\n        $('.PopUp').css('display', 'block');\n      }\n    });\n    this.userDataTracker = Tracker.autorun(() => {\n      Meteor.subscribe('userData');\n      const userData = Meteor.users.find().fetch();\n      this.setState({\n        userData\n      });\n    });\n  }\n\n  getName() {\n    console.log(this.state.userData);\n    return this.state.userData.map(user => {\n      return user.profile.fname + \" \" + user.profile.lname;\n    });\n  }\n\n  getEmail() {\n    return this.state.userData.map(user => {\n      return user.emails[0].address;\n    });\n  }\n\n  getEmailStatus() {\n    return this.state.userData.map(user => {\n      return String(user.emails[0].verified);\n    });\n  }\n\n  render() {\n    return React.createElement(\n      \"div\",\n      {\n        id: \"body\"\n      },\n      React.createElement(\n        \"div\",\n        {\n          className: \"ACon\"\n        },\n        React.createElement(\n          \"div\",\n          {\n            className: \"Profile\"\n          },\n          React.createElement(\n            \"div\",\n            {\n              className: \"Img\"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"overlay\"\n              },\n              React.createElement(\n                \"span\",\n                null,\n                React.createElement(\"img\", null)\n              )\n            )\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"PopUp\"\n            },\n            \"Open Profile\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"clickPopUp\"\n            },\n            React.createElement(\n              \"h4\",\n              null,\n              React.createElement(\n                \"a\",\n                {\n                  className: \"username\",\n                  href: true\n                },\n                this.getName()\n              )\n            ),\n            React.createElement(\n              \"h5\",\n              {\n                className: \"buttons\"\n              },\n              React.createElement(\n                \"a\",\n                {\n                  className: \"username\",\n                  href: true\n                },\n                this.getEmail()\n              )\n            ),\n            React.createElement(\n              \"h5\",\n              {\n                className: \"buttons\"\n              },\n              React.createElement(\n                \"a\",\n                {\n                  className: \"username\",\n                  href: true\n                },\n                \"Verified \",\n                this.getEmailStatus()\n              )\n            ),\n            React.createElement(\n              \"h5\",\n              {\n                className: \"buttons\"\n              },\n              React.createElement(\n                \"button\",\n                {\n                  className: \"btn button--link-text\",\n                  onClick: () => Accounts.logout()\n                },\n                \"Logout\"\n              )\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"Social\"\n              },\n              React.createElement(\n                \"svg\",\n                {\n                  viewBox: \"0 0 512 512\",\n                  id: \"logo\",\n                  className: \"codepen\"\n                },\n                React.createElement(\"path\", {\n                  className: \"box\",\n                  d: \"M427 201.9c-0.6-4.2-2.9-8-6.4-10.3L264.2 87.3c-4.9-3.3-11.4-3.3-16.3 0L91.4 191.6c-4 2.7-6.5 7.4-6.5 12.2v104.3c0 4.8 2.5 9.6 6.5 12.2l156.4 104.3c4.9 3.3 11.4 3.3 16.3 0L420.6 320.4c4-2.6 6.6-7.4 6.6-12.2V203.9C427.1 203.2 427.1 202.6 427 201.9 427 201.7 427.1 202.6 427 201.9zM270.7 127.1l115.2 76.8 -51.5 34.4 -63.8-42.7V127.1zM241.3 127.1v68.6l-63.8 42.7 -51.5-34.4L241.3 127.1zM114.3 231.4l36.8 24.6 -36.8 24.6V231.4zM241.3 384.9L126.1 308.1l51.5-34.4 63.8 42.6V384.9zM256 290.8l-52-34.8 52-34.8 52 34.8L256 290.8zM270.7 384.9V316.3l63.8-42.6 51.5 34.4L270.7 384.9zM397.7 280.6l-36.8-24.6 36.8-24.6V280.6z\"\n                })\n              ),\n              React.createElement(\n                \"svg\",\n                {\n                  viewBox: \"0 0 512 512\",\n                  id: \"logo\"\n                },\n                React.createElement(\"path\", {\n                  className: \"box\",\n                  d: \"M211.9 197.4h-36.7v59.9h36.7V433.1h70.5V256.5h49.2l5.2-59.1h-54.4c0 0 0-22.1 0-33.7 0-13.9 2.8-19.5 16.3-19.5 10.9 0 38.2 0 38.2 0V82.9c0 0-40.2 0-48.8 0 -52.5 0-76.1 23.1-76.1 67.3C211.9 188.8 211.9 197.4 211.9 197.4z\"\n                })\n              ),\n              React.createElement(\n                \"svg\",\n                {\n                  viewBox: \"0 0 512 512\",\n                  id: \"logo\"\n                },\n                React.createElement(\"path\", {\n                  d: \"M422.6 193.6c-5.3-45.3-23.3-51.6-59-54 -50.8-3.5-164.3-3.5-215.1 0 -35.7 2.4-53.7 8.7-59 54 -4 33.6-4 91.1 0 124.8 5.3 45.3 23.3 51.6 59 54 50.9 3.5 164.3 3.5 215.1 0 35.7-2.4 53.7-8.7 59-54C426.6 284.8 426.6 227.3 422.6 193.6zM222.2 303.4v-94.6l90.7 47.3L222.2 303.4z\"\n                })\n              )\n            )\n          )\n        )\n      )\n    ) // <div>\n    //   <h1>Welcome to User dashboard</h1>\n    //     <button className=\"btn button--link-text\" onClick={() => Accounts.logout()}>Logout</button>\n    //     <div className=\"widths\">\n    //       <form  onSubmit={this.handleUpload.bind(this)} noValidate className=\"boxed-view__form\">\n    //         <input type=\"file\" id=\"s3file\"/>\n    //         {this.state.isUploading?<div className=\"progress\">\n    //           <div className=\"progress-bar\" role=\"progressbar\" data-width={this.state.progressValue} aria-valuemin=\"0\" aria-valuemax=\"100\" style={{width:this.state.progressValue} } >\n    //              <span className=\"sr-only\">{this.state.progressValue}% Complete</span>\n    //           </div>\n    //         </div>: <div></div>}\n    //         <button className=\"btn button--link-text\">Upload</button>\n    //       </form>\n    //     </div>\n    //     <div className=\"widths\">\n    //       <form  onSubmit={this.onSubmitDel.bind(this)} noValidate className=\"boxed-view__form\">\n    //         <button className=\"btn button--link-text\">Delete Uploaded file</button>\n    //       </form>\n    //     </div>\n    // </div>\n    ;\n  }\n\n}","map":{"version":3,"sources":["imports/common/UserDashboard.js"],"names":["module","export","default","UserDashboard","React","watch","require","v","Link","Accounts","Mongo","Meteor","Tracker","Component","componentWillMount","$","length","commonCss","document","createElement","type","rel","href","head","append","lenth","userCss","componentWillUnmount","remove","userDataTracker","stop","constructor","props","metaContext","dir","name","uploader","Slingshot","Upload","state","upload","isUploading","progressValue","userData","calculateProgress","uploadComputation","autorun","uploadProgress","Math","round","progress","isNaN","setState","handleUpload","e","preventDefault","comp","send","getElementById","files","error","downloadUrl","console","reason","log","users","update","userId","$set","onSubmitDel","user","findOne","call","image","profile","err","res","componentDidMount","$Menu","mouseenter","css","mouseleave","on","hasClass","addClass","removeClass","subscribe","find","fetch","getName","map","fname","lname","getEmail","emails","address","getEmailStatus","String","verified","render","logout"],"mappings":"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","file":"imports/common/UserDashboard.js.map","sourcesContent":["import React from 'react';\nimport {Link} from 'react-router';\nimport { Accounts } from 'meteor/accounts-base';\nimport {Mongo} from 'meteor/mongo';\nimport {Meteor } from 'meteor/meteor';\nimport {Tracker} from 'meteor/tracker';\n\nexport default class UserDashboard extends React.Component {\n  componentWillMount() {\n    if(!$(\"link[href='/css/common.css']\").length > 0){\n      var commonCss = document.createElement(\"link\");\n      commonCss.type=\"text/css\";\n      commonCss.rel =\"stylesheet\";\n      commonCss.href=\"/css/common.css\";\n      document.head.append(commonCss);\n    }\n    if(!$(\"link[href='/css/user.css']\").lenth > 0){\n      var userCss = document.createElement(\"link\");\n      commonCss.type=\"text/css\";\n      commonCss.rel =\"stylesheet\";\n      commonCss.href=\"/css/user.css\";\n      document.head.append(userCss);\n    }\n  }\n  componentWillUnmount() {\n    $(\"link[href='/css/common.css']\").remove();\n    $(\"link[href='/css/user.css']\").remove();\n    this.userDataTracker.stop();\n  }\n    constructor(props){\n      super(props);\n      var metaContext = {dir: \"images\" , name: \"avatar\"}\n      var uploader = new Slingshot.Upload(\"myFileUploads\" ,metaContext);\n      this.state = {\n        upload: uploader,\n        isUploading: false,\n        progressValue: \"0%\",\n        userData: [],\n      };\n    }\n    calculateProgress(){\n      this.uploadComputation = Tracker.autorun(() => {\n           const uploadProgress = Math.round(this.state.upload.progress() * 100);\n           if (!isNaN(uploadProgress)) this.setState({progressValue: uploadProgress +\"%\" });\n      });\n    }\n\n    handleUpload(e) {\n      e.preventDefault();\n      this.setState({isUploading: true});\n      this.calculateProgress();\n      var comp = this;\n      // console.log(comp);\n\n      this.state.upload.send(document.getElementById('s3file').files[0], function (error, downloadUrl) {\n        if (error) {\n          // Log service detailed response.\n          console.error('Error uploading', error.reason);\n          console.error (error);\n        }\n        else {\n          // console.log(comp);\n          comp.setState({isUploading:false});\n          comp.uploadComputation.stop();\n          comp.setState({progressValue:\"0%\"});\n          // console.log(comp.state.isUploading);\n          // console.log(comp.state.uploadComputation);\n          // console.log(comp.state.progressValue);\n          console.log(\"Success file uploaded! \" + downloadUrl);\n          Meteor.users.update(Meteor.userId(), {$set: {\"profile.image\": downloadUrl}});\n        }\n      });\n    }\n    onSubmitDel(e){\n      e.preventDefault();\n      let user = Meteor.users.findOne(Meteor.userId());\n      Meteor.call('removePhotoData',{\n        image: user.profile.image\n      },(err, res) => {\n        if(err){\n          console.log(user.profile.image);\n          console.log(\"delete error\" + err);\n        }else {\n          console.log('Success file deleted.');\n        }\n      });\n\n    }\n    componentDidMount() {\n      var $Menu = $('.Img');\n    \t$('.Img').mouseenter(function() {\n            $('.PopUp').css('opacity', '1');\n    \t\t$('.PopUp').css('margin-top', '20px');\n      });\n  \t\t$('.Img').mouseleave(function() {\n          $('.PopUp').css('opacity', '0');\n  \t\t$('.PopUp').css('margin-top', '0px');\n      });\n    \t$('.Img').on('click', function() {\n    \t\tif($Menu.hasClass('Img')){\n    \t\t\t\t$('.Img').addClass('click');\n    \t\t$('.Img').removeClass('Img');\n    \t\t\t\t$('.Profile').addClass('clickProfile');\n    \t\t\t\t$('.Profile').removeClass('Profile');\n    \t\t\t\t$('.clickPopUp').css('display', 'block');\n    \t\t\t\t$('.PopUp').css('display', 'none');\n    \t\t}else{\n    \t\t$('.click').addClass('Img');\n    \t\t$('.click').removeClass('click');\n    \t\t\t\t$('.clickProfile').addClass('Profile');\n    \t\t\t\t$('.clickProfile').removeClass('clickProfile');\n    \t\t\t\t\t\t\t\t$('.clickPopUp').css('display', 'none');\n    \t\t\t\t$('.PopUp').css('display', 'block');\n    \t\t\t}\n    \t\t});\n        this.userDataTracker = Tracker.autorun(() => {\n          Meteor.subscribe('userData');\n          const userData = Meteor.users.find().fetch();\n          this.setState({ userData });\n        });\n    }\n    getName(){\n      console.log(this.state.userData);\n      return this.state.userData.map((user) => {\n        return user.profile.fname + \" \" +user.profile.lname;\n      });\n    }\n    getEmail(){\n      return this.state.userData.map((user) => {\n        return user.emails[0].address;\n      });\n    }\n    getEmailStatus(){\n      return this.state.userData.map((user) => {\n        return String(user.emails[0].verified);\n      });\n    }\n    render() {\n        return (\n            <div id=\"body\">\n              <div className=\"ACon\">\n                <div className=\"Profile\">\n                  <div className=\"Img\">\n                    <div className=\"overlay\">\n                      <span><img /></span>\n                    </div>\n                  </div>\n                  <div className=\"PopUp\">Open Profile</div>\n                  <div className=\"clickPopUp\">\n                    <h4>\n                    <a className=\"username\" href>{this.getName()}</a>\n                    </h4>\n                    <h5 className=\"buttons\">\n                      <a className=\"username\" href>{this.getEmail()}</a>\n                    </h5>\n                    <h5 className=\"buttons\">\n                      <a className=\"username\" href>Verified {this.getEmailStatus()}</a>\n                    </h5>\n                    <h5 className=\"buttons\">\n                      <button className=\"btn button--link-text\" onClick={() => Accounts.logout()}>Logout</button>\n                    </h5>\n                    <div className=\"Social\">\n                      <svg viewBox=\"0 0 512 512\" id=\"logo\" className=\"codepen\">\n                        <path className=\"box\" d=\"M427 201.9c-0.6-4.2-2.9-8-6.4-10.3L264.2 87.3c-4.9-3.3-11.4-3.3-16.3 0L91.4 191.6c-4 2.7-6.5 7.4-6.5 12.2v104.3c0 4.8 2.5 9.6 6.5 12.2l156.4 104.3c4.9 3.3 11.4 3.3 16.3 0L420.6 320.4c4-2.6 6.6-7.4 6.6-12.2V203.9C427.1 203.2 427.1 202.6 427 201.9 427 201.7 427.1 202.6 427 201.9zM270.7 127.1l115.2 76.8 -51.5 34.4 -63.8-42.7V127.1zM241.3 127.1v68.6l-63.8 42.7 -51.5-34.4L241.3 127.1zM114.3 231.4l36.8 24.6 -36.8 24.6V231.4zM241.3 384.9L126.1 308.1l51.5-34.4 63.8 42.6V384.9zM256 290.8l-52-34.8 52-34.8 52 34.8L256 290.8zM270.7 384.9V316.3l63.8-42.6 51.5 34.4L270.7 384.9zM397.7 280.6l-36.8-24.6 36.8-24.6V280.6z\" />\n                      </svg>\n                      <svg viewBox=\"0 0 512 512\" id=\"logo\">\n                        <path className=\"box\" d=\"M211.9 197.4h-36.7v59.9h36.7V433.1h70.5V256.5h49.2l5.2-59.1h-54.4c0 0 0-22.1 0-33.7 0-13.9 2.8-19.5 16.3-19.5 10.9 0 38.2 0 38.2 0V82.9c0 0-40.2 0-48.8 0 -52.5 0-76.1 23.1-76.1 67.3C211.9 188.8 211.9 197.4 211.9 197.4z\" />\n                      </svg>\n                      <svg viewBox=\"0 0 512 512\" id=\"logo\">\n                        <path d=\"M422.6 193.6c-5.3-45.3-23.3-51.6-59-54 -50.8-3.5-164.3-3.5-215.1 0 -35.7 2.4-53.7 8.7-59 54 -4 33.6-4 91.1 0 124.8 5.3 45.3 23.3 51.6 59 54 50.9 3.5 164.3 3.5 215.1 0 35.7-2.4 53.7-8.7 59-54C426.6 284.8 426.6 227.3 422.6 193.6zM222.2 303.4v-94.6l90.7 47.3L222.2 303.4z\" />\n                      </svg>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            // <div>\n            //   <h1>Welcome to User dashboard</h1>\n            //     <button className=\"btn button--link-text\" onClick={() => Accounts.logout()}>Logout</button>\n            //     <div className=\"widths\">\n            //       <form  onSubmit={this.handleUpload.bind(this)} noValidate className=\"boxed-view__form\">\n            //         <input type=\"file\" id=\"s3file\"/>\n            //         {this.state.isUploading?<div className=\"progress\">\n            //           <div className=\"progress-bar\" role=\"progressbar\" data-width={this.state.progressValue} aria-valuemin=\"0\" aria-valuemax=\"100\" style={{width:this.state.progressValue} } >\n            //              <span className=\"sr-only\">{this.state.progressValue}% Complete</span>\n            //           </div>\n            //         </div>: <div></div>}\n            //         <button className=\"btn button--link-text\">Upload</button>\n            //       </form>\n            //     </div>\n            //     <div className=\"widths\">\n            //       <form  onSubmit={this.onSubmitDel.bind(this)} noValidate className=\"boxed-view__form\">\n            //         <button className=\"btn button--link-text\">Delete Uploaded file</button>\n            //       </form>\n            //     </div>\n            // </div>\n        );\n    }\n}\n"]},"hash":"0740e375a2d47e0819738a2f7b9f07c9cb9a2dd8"}
