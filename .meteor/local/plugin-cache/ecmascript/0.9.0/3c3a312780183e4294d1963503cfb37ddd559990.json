{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/mongo","imported":["Mongo"],"specifiers":[{"kind":"named","imported":"Mongo","local":"Mongo"}]},{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-dom","imported":["render"],"specifiers":[{"kind":"named","imported":"render","local":"render"}]},{"source":"meteor/ultimatejs:tracker-react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TrackerReact"}]},{"source":"meteor/react-meteor-data","imported":["withTracker"],"specifiers":[{"kind":"named","imported":"withTracker","local":"withTracker"}]},{"source":"react-validation","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Validation"}]},{"source":"validator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"validator"}]},{"source":"meteor/tracker","imported":["Tracker"],"specifiers":[{"kind":"named","imported":"Tracker","local":"Tracker"}]},{"source":"react-router","imported":["browserHistory"],"specifiers":[{"kind":"named","imported":"browserHistory","local":"browserHistory"}]},{"source":"react-router","imported":["Link"],"specifiers":[{"kind":"named","imported":"Link","local":"Link"}]},{"source":"./api/TempUpload.js","imported":["TempTicketImages"],"specifiers":[{"kind":"named","imported":"TempTicketImages","local":"TempTicketImages"}]},{"source":"./api/TempUpload.js","imported":["TempTicketVideo"],"specifiers":[{"kind":"named","imported":"TempTicketVideo","local":"TempTicketVideo"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/dashboard/ticketManagement/AddImagesVideo.jsx","filenameRelative":"imports/dashboard/ticketManagement/AddImagesVideo.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/ticketManagement/AddImagesVideo.jsx.map","sourceFileName":"imports/dashboard/ticketManagement/AddImagesVideo.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AddImagesVideo"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Meteor = void 0;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar Mongo = void 0;\nmodule.watch(require(\"meteor/mongo\"), {\n  Mongo: function (v) {\n    Mongo = v;\n  }\n}, 1);\nvar React = void 0,\n    Component = void 0;\nmodule.watch(require(\"react\"), {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 2);\nvar render = void 0;\nmodule.watch(require(\"react-dom\"), {\n  render: function (v) {\n    render = v;\n  }\n}, 3);\nvar TrackerReact = void 0;\nmodule.watch(require(\"meteor/ultimatejs:tracker-react\"), {\n  \"default\": function (v) {\n    TrackerReact = v;\n  }\n}, 4);\nvar withTracker = void 0;\nmodule.watch(require(\"meteor/react-meteor-data\"), {\n  withTracker: function (v) {\n    withTracker = v;\n  }\n}, 5);\nvar Validation = void 0;\nmodule.watch(require(\"react-validation\"), {\n  \"default\": function (v) {\n    Validation = v;\n  }\n}, 6);\nvar validator = void 0;\nmodule.watch(require(\"validator\"), {\n  \"default\": function (v) {\n    validator = v;\n  }\n}, 7);\nvar Tracker = void 0;\nmodule.watch(require(\"meteor/tracker\"), {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 8);\nvar browserHistory = void 0;\nmodule.watch(require(\"react-router\"), {\n  browserHistory: function (v) {\n    browserHistory = v;\n  }\n}, 9);\nvar Link = void 0;\nmodule.watch(require(\"react-router\"), {\n  Link: function (v) {\n    Link = v;\n  }\n}, 10);\nvar TempTicketImages = void 0;\nmodule.watch(require(\"./api/TempUpload.js\"), {\n  TempTicketImages: function (v) {\n    TempTicketImages = v;\n  }\n}, 11);\nvar TempTicketVideo = void 0;\nmodule.watch(require(\"./api/TempUpload.js\"), {\n  TempTicketVideo: function (v) {\n    TempTicketVideo = v;\n  }\n}, 12);\n\nvar AddImagesVideo = function (_TrackerReact) {\n  (0, _inherits3.default)(AddImagesVideo, _TrackerReact);\n\n  function AddImagesVideo(props) {\n    (0, _classCallCheck3.default)(this, AddImagesVideo);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _TrackerReact.call(this, props));\n\n    _this.state = {\n      \"remark\": ''\n    };\n    _this.handleChange = _this.handleChange.bind(_this);\n    return _this;\n  }\n\n  AddImagesVideo.prototype.handleUpload = function () {\n    function handleUpload(event) {\n      event.preventDefault();\n      var self = this; // this.setState({isUploading: true});\n\n      if (event.currentTarget.files && event.currentTarget.files[0]) {\n        var dataImg = event.currentTarget.files[0];\n\n        if (dataImg.type == \"image/jpeg\" || dataImg.type == \"image/png\") {\n          var reader = new FileReader();\n\n          reader.onload = function (e) {// $('.uploadedImageFromLocl').attr('src', e.target.result);      \n          };\n\n          reader.readAsDataURL(event.currentTarget.files[0]);\n          var file = event.currentTarget.files[0];\n\n          if (file) {\n            addImgsToS3Function(file, self);\n          }\n        } else {\n          swal({\n            position: 'top-right',\n            type: 'error',\n            title: 'Please select image',\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }\n      }\n    }\n\n    return handleUpload;\n  }();\n\n  AddImagesVideo.prototype.handleChange = function () {\n    function handleChange(event) {\n      var _setState;\n\n      event.preventDefault();\n      var target = event.target;\n      var name = target.name;\n      this.setState((_setState = {}, _setState[name] = event.target.value, _setState));\n    }\n\n    return handleChange;\n  }();\n\n  AddImagesVideo.prototype.handleVideoUpload = function () {\n    function handleVideoUpload(event) {\n      event.preventDefault();\n      var self = this;\n\n      if (event.currentTarget.files && event.currentTarget.files[0]) {\n        var dataImg = event.currentTarget.files[0];\n\n        if (dataImg.type == \"video/mp4\") {\n          var reader = new FileReader();\n\n          reader.onload = function (e) {// $('.uploadedImageFromLocl').attr('src', e.target.result);       \n          };\n\n          reader.readAsDataURL(event.currentTarget.files[0]);\n          var file = event.currentTarget.files[0];\n\n          if (file) {\n            addTicketVideoS3Function(file, self);\n          }\n        } else {\n          swal({\n            position: 'top-right',\n            type: 'error',\n            title: 'Please select Video',\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }\n      }\n    }\n\n    return handleVideoUpload;\n  }();\n\n  AddImagesVideo.prototype.submitImageVideo = function () {\n    function submitImageVideo(event) {\n      event.preventDefault();\n      var userId = this.props.ticket.userId;\n      var images = this.props.ticketImages;\n      var videos = this.props.ticketVideo;\n      console.log(\"userId\", userId);\n      console.log(\"images\", images);\n      console.log(\"videos\", videos);\n      var remark = this.refs.remark.value;\n      console.log(\"remark\", remark);\n      var ticketElementObj = {};\n\n      if (this.props.ticket) {\n        if (this.props.ticket.ticketElement) {\n          if (this.props.ticket.ticketElement.length > 0) {\n            ticketElementObj = this.props.ticket.ticketElement[this.props.ticket.ticketElement.length - 1];\n            console.log(\"ticketElementObj = \", ticketElementObj);\n          }\n        }\n\n        if (this.props.ticket.addressType == \"permanentAddress\") {} else if (this.props.ticket.addressType == \"currentAddress\") {\n          var currenrAddressId = ticketElementObj.currentAddress.currentAddressId;\n          console.log(\"currenrAddressId\", currenrAddressId);\n        }\n      }\n    }\n\n    return submitImageVideo;\n  }();\n\n  AddImagesVideo.prototype.render = function () {\n    function render() {\n      // console.log(\"ticket\",this.props.ticket);\n      return React.createElement(\n        \"div\",\n        null,\n        React.createElement(\n          \"div\",\n          {\n            className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 choosefilebox\"\n          },\n          React.createElement(\n            \"form\",\n            null,\n            React.createElement(\n              \"div\",\n              {\n                className: \"col-lg-12 wholeborder \"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"imgtitile col-lg-12 noLRPad\"\n                },\n                React.createElement(\n                  \"div\",\n                  {\n                    className: \"col-lg-12  noLRPad Selectimg\"\n                  },\n                  \" Select images:\"\n                ),\n                React.createElement(\"input\", {\n                  type: \"file\",\n                  ref: \"ticketImageFile\",\n                  id: \"s3file\",\n                  name: \"ticketImageFile\",\n                  onChange: this.handleUpload.bind(this),\n                  className: \"col-lg-7 noLRPad\",\n                  name: \"img\",\n                  multiple: true\n                })\n              ),\n              !this.props.loading ? React.createElement(\n                \"div\",\n                {\n                  className: \"col-lg-12 imgbox\"\n                },\n                this.props.ticketImages ? this.props.ticketImages.map(function (ticketImages, index) {\n                  return React.createElement(\n                    \"div\",\n                    {\n                      className: \"col-lg-3 imgbrPre\",\n                      key: index\n                    },\n                    React.createElement(\n                      \"div\",\n                      {\n                        className: \"imgbr\"\n                      },\n                      React.createElement(\"img\", {\n                        src: ticketImages.imageLink,\n                        className: \"img1 img-responsive\"\n                      }),\n                      \"          \"\n                    )\n                  );\n                }) : \"\"\n              ) : \"\"\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"col-lg-12 wholeborder\"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"imgtitile col-lg-12  noLRPad\"\n                },\n                React.createElement(\n                  \"div\",\n                  {\n                    className: \"col-lg-12 noLRPad Selectimg\"\n                  },\n                  \" Select Video:\"\n                ),\n                React.createElement(\"input\", {\n                  type: \"file\",\n                  ref: \"ticketVideoFile\",\n                  id: \"s3file\",\n                  name: \"ticketVideoFile\",\n                  onChange: this.handleVideoUpload.bind(this),\n                  className: \"col-lg-7 noLRPad\",\n                  name: \"img\",\n                  multiple: true\n                })\n              ),\n              !this.props.loading1 ? React.createElement(\n                \"div\",\n                {\n                  className: \"col-lg-12 imgbox\"\n                },\n                this.props.ticketVideo ? this.props.ticketVideo.map(function (ticketVideo, index) {\n                  return React.createElement(\n                    \"div\",\n                    {\n                      className: \"col-lg-4 imgbrvid\",\n                      key: index\n                    },\n                    React.createElement(\n                      \"video\",\n                      {\n                        width: \"200\",\n                        height: \"200\",\n                        controls: true\n                      },\n                      React.createElement(\"source\", {\n                        src: ticketVideo.videoLink,\n                        type: \"video/mp4\"\n                      })\n                    )\n                  );\n                }) : \"\"\n              ) : \"\"\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"col-lg-12 wholeborder\"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  className: \"imgtitile col-lg-12  noLRPad\"\n                },\n                React.createElement(\n                  \"div\",\n                  {\n                    className: \"col-lg-12 noLRPad Selectimg\"\n                  },\n                  \"Remark:\"\n                )\n              ),\n              React.createElement(\n                \"div\",\n                {\n                  className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12  noLRPad\"\n                },\n                React.createElement(\"textarea\", {\n                  className: \"form-control col-lg-12 col-sm-12 col-md-12 col-xs-12\",\n                  name: \"remark\",\n                  ref: \"remark\",\n                  id: \"remark\",\n                  onChange: this.handleChange,\n                  rows: \"5\",\n                  id: \"remark\"\n                })\n              )\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"col-lg-12 wholeborder text-center\"\n              },\n              React.createElement(\n                \"button\",\n                {\n                  type: \"submit\",\n                  onClick: this.submitImageVideo.bind(this),\n                  className: \"btn btn-primary\"\n                },\n                \"Submit\"\n              )\n            )\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return AddImagesVideo;\n}(TrackerReact(Component));\n\nAddImagesVideoContainer = withTracker(function (props) {\n  var postHandle = Meteor.subscribe('allTicketImages');\n  var postHandle1 = Meteor.subscribe('allTicketVideo');\n  var ticketImages = TempTicketImages.find({}).fetch() || [];\n  console.log(\"ticketImages\", ticketImages);\n  var ticketVideo = TempTicketVideo.find({}).fetch() || [];\n  console.log(\"ticketVideo\", ticketVideo);\n  var loading = !postHandle.ready();\n  var loading1 = !postHandle1.ready();\n  var ticket = props.ticket;\n  console.log(\"ticket\", ticket); // if(_id){\n\n  return {\n    loading: loading,\n    loading1: loading1,\n    ticketImages: ticketImages,\n    ticketVideo: ticketVideo,\n    ticket: ticket\n  };\n})(AddImagesVideo);\nmodule.exportDefault(AddImagesVideoContainer);","map":{"version":3,"sources":["imports/dashboard/ticketManagement/AddImagesVideo.jsx"],"names":["Meteor","module","watch","require","v","Mongo","React","Component","render","TrackerReact","withTracker","Validation","validator","Tracker","browserHistory","Link","TempTicketImages","TempTicketVideo","AddImagesVideo","props","state","handleChange","bind","handleUpload","event","preventDefault","self","currentTarget","files","dataImg","type","reader","FileReader","onload","e","readAsDataURL","file","addImgsToS3Function","swal","position","title","showConfirmButton","timer","target","name","setState","value","handleVideoUpload","addTicketVideoS3Function","submitImageVideo","userId","ticket","images","ticketImages","videos","ticketVideo","console","log","remark","refs","ticketElementObj","ticketElement","length","addressType","currenrAddressId","currentAddress","currentAddressId","loading","map","index","imageLink","loading1","videoLink","AddImagesVideoContainer","postHandle","subscribe","postHandle1","find","fetch","ready","exportDefault"],"mappings":"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","file":"imports/dashboard/ticketManagement/AddImagesVideo.jsx.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport TrackerReact from 'meteor/ultimatejs:tracker-react';\nimport { withTracker } from 'meteor/react-meteor-data';\nimport Validation from 'react-validation';\nimport validator from 'validator';\nimport {Tracker} from 'meteor/tracker';\nimport { browserHistory } from 'react-router'; \nimport { Link } from 'react-router';\nimport { TempTicketImages } from './api/TempUpload.js';\nimport { TempTicketVideo } from './api/TempUpload.js';\nclass AddImagesVideo extends TrackerReact(Component){\n\t constructor(props){\n    super(props);\n    this.state = { \n      \"remark\" : '',\n    }\n    this.handleChange = this.handleChange.bind(this);\n  }\n  handleUpload(event){\n    event.preventDefault();\n    let self = this;\n     // this.setState({isUploading: true});\n    if (event.currentTarget.files && event.currentTarget.files[0]) { \n      var dataImg =event.currentTarget.files[0];  \n       if(dataImg.type == \"image/jpeg\" || dataImg.type == \"image/png\"){      \n         var reader = new FileReader();        reader.onload = function (e) {          \n           // $('.uploadedImageFromLocl').attr('src', e.target.result);      \n         };       \n         reader.readAsDataURL(event.currentTarget.files[0]);      \n         var file = event.currentTarget.files[0];      \n          if (file) {         \n            addImgsToS3Function(file,self);       \n          }   \n       } else { \n        swal({    \n           position: 'top-right',     \n           type: 'error',    \n           title: 'Please select image',       \n           showConfirmButton: false,      \n           timer: 1500      \n         });   \n      }\n    }\n  }\n  handleChange(event){\n   event.preventDefault();\n   const target = event.target;\n   const name   = target.name;\n   this.setState({\n    [name]: event.target.value,\n   });\n  }\n  handleVideoUpload(event){\n    event.preventDefault();\n    let self = this;\n    if (event.currentTarget.files && event.currentTarget.files[0]) {  \n      var dataImg =event.currentTarget.files[0];   \n       if(dataImg.type == \"video/mp4\"){       \n         var reader = new FileReader();        \n          reader.onload = function (e) {           \n           // $('.uploadedImageFromLocl').attr('src', e.target.result);       \n         };        \n         reader.readAsDataURL(event.currentTarget.files[0]);       \n         var file = event.currentTarget.files[0];       \n          if (file) {          \n            addTicketVideoS3Function(file,self);        \n          }    \n       } else {  \n        swal({     \n           position: 'top-right',      \n           type: 'error',     \n           title: 'Please select Video',        \n           showConfirmButton: false,       \n           timer: 1500       \n         });    \n      }\n    }\n  }\n  submitImageVideo(event){\n    event.preventDefault();\n    var userId = this.props.ticket.userId;\n    var images = this.props.ticketImages;\n    var videos = this.props.ticketVideo;\n    console.log(\"userId\",userId);\n    console.log(\"images\",images);\n    console.log(\"videos\",videos);\n    var remark = this.refs.remark.value;\n    console.log(\"remark\",remark);\n    var ticketElementObj = {};\n   if (this.props.ticket) {\n      if (this.props.ticket.ticketElement) {\n        if (this.props.ticket.ticketElement.length > 0) {\n            ticketElementObj  = this.props.ticket.ticketElement[this.props.ticket.ticketElement.length-1];\n            console.log(\"ticketElementObj = \",ticketElementObj);      \n        }\n      }\n      if (this.props.ticket.addressType == \"permanentAddress\") {   \n        \n        \n     }else if (this.props.ticket.addressType == \"currentAddress\") {\n         var currenrAddressId = ticketElementObj.currentAddress.currentAddressId;\n         console.log(\"currenrAddressId\",currenrAddressId);\n      }\n    }\n  }\n\trender(){\n    // console.log(\"ticket\",this.props.ticket);\n     return( \n      <div>\n       <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 choosefilebox\">\n        <form>\n\t        <div className=\"col-lg-12 wholeborder \">\n\t\t          <div className=\"imgtitile col-lg-12 noLRPad\">\n\t\t\t          <div className=\"col-lg-12  noLRPad Selectimg\"> Select images:</div> \n\t\t\t\t          <input type=\"file\" ref=\"ticketImageFile\" id=\"s3file\" name=\"ticketImageFile\"  onChange={this.handleUpload.bind(this)} className=\"col-lg-7 noLRPad\" name=\"img\" multiple />\n\t\t\t        </div> \n            {!this.props.loading ?\n            \t<div className=\"col-lg-12 imgbox\">\n               {this.props.ticketImages ?\n               \t this.props.ticketImages.map((ticketImages,index) =>{\n               \t \t return(\n               \t \t \t  <div className=\"col-lg-3 imgbrPre\" key={index}>\n\t\t\t\t\t\t\t\t        <div className=\"imgbr\">\n\t\t\t\t\t\t\t\t          <img src={ticketImages.imageLink} className=\"img1 img-responsive\" />\n\t\t\t\t{/*\t\t\t\t        <i className=\"fa fa-times-circle\"></i>\n\t\t\t\t*/}\t\t\t\t      </div>\n\t\t\t\t\t\t\t        </div>\n               \t \t \t);\n               \t })\n               \t :\n               \t \"\"\n               }\n\t\t\t\t        \n\t\t\t        </div>\n\t\t\t        :\n              \"\"\n            }\n\t          \n\t       </div>\n\t      <div className=\"col-lg-12 wholeborder\">\n\t        <div className=\"imgtitile col-lg-12  noLRPad\">\n\t          <div className=\"col-lg-12 noLRPad Selectimg\"> Select Video:</div> \n\t\t\t\t      <input type=\"file\" ref=\"ticketVideoFile\" id=\"s3file\" name=\"ticketVideoFile\"  onChange={this.handleVideoUpload.bind(this)} className=\"col-lg-7 noLRPad\" name=\"img\" multiple />\n\t          {/*<input type=\"submit\" className=\"col-lg-1 btn btn-primary\" />*/}\n\t          </div>\n\n\t         {!this.props.loading1 ?\n            \t<div className=\"col-lg-12 imgbox\">\n               {this.props.ticketVideo ?\n               \t this.props.ticketVideo.map((ticketVideo,index) =>{\n               \t \t return(\n               \t \t \t  <div className=\"col-lg-4 imgbrvid\" key={index}>\n\t\t\t\t\t\t\t\t          <video width=\"200\" height=\"200\"  controls>\n\t\t\t\t\t\t\t\t\t          <source src={ticketVideo.videoLink} type=\"video/mp4\" />\n\t\t\t\t\t\t\t\t\t        </video>\n\t\t\t\t\t\t\t        </div>\n               \t \t \t);\n               \t })\n               \t :\n               \t \"\"\n               }\n\t\t\t\t        \n\t\t\t        </div>\n\t\t\t        :\n              \"\"\n            }\n\n\t      </div>\n\t      <div className=\"col-lg-12 wholeborder\">\n\t          <div className=\"imgtitile col-lg-12  noLRPad\">\n\t            <div className=\"col-lg-12 noLRPad Selectimg\">Remark:</div> \n            </div>\n            <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12  noLRPad\">\n               <textarea className=\"form-control col-lg-12 col-sm-12 col-md-12 col-xs-12\" name=\"remark\" ref=\"remark\" id=\"remark\" onChange={this.handleChange} rows=\"5\" id=\"remark\"></textarea>\t          \n            </div>\n\t      </div>\n\t      <div className=\"col-lg-12 wholeborder text-center\">\n\t         <button type=\"submit\" onClick={this.submitImageVideo.bind(this)} className=\"btn btn-primary\">Submit</button>\n\t      </div>\n\n       </form>\n      </div>\n\n     </div>\n     ); \n   }        \n}\nAddImagesVideoContainer = withTracker(props => {  \n\n    const postHandle   = Meteor.subscribe('allTicketImages');\n    const postHandle1  = Meteor.subscribe('allTicketVideo');\n    const ticketImages = TempTicketImages.find({}).fetch() || [];  \n    console.log(\"ticketImages\",ticketImages);\n    const ticketVideo = TempTicketVideo.find({}).fetch() || [];  \n    console.log(\"ticketVideo\",ticketVideo);\n    const loading     = !postHandle.ready();\n    const loading1    = !postHandle1.ready();\n    const ticket      = props.ticket;\n    console.log(\"ticket\",ticket);\n\n    // if(_id){\n      return {\n          loading : loading,\n          loading1 : loading1,\n          ticketImages : ticketImages,\n          ticketVideo  : ticketVideo,\n          ticket   : ticket,\n      };\n})(AddImagesVideo);\nexport default AddImagesVideoContainer;"]},"hash":"3c3a312780183e4294d1963503cfb37ddd559990"}
