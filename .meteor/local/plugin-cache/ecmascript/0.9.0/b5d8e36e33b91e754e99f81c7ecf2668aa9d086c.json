{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/mongo","imported":["Mongo"],"specifiers":[{"kind":"named","imported":"Mongo","local":"Mongo"}]},{"source":"meteor/session","imported":["Session"],"specifiers":[{"kind":"named","imported":"Session","local":"Session"}]}],"exports":{"exported":["Product"],"specifiers":[{"kind":"local","local":"Product","exported":"Product"}]}}},"options":{"filename":"imports/dashboard/product/addNewProduct/api/ProductMaster.js","filenameRelative":"imports/dashboard/product/addNewProduct/api/ProductMaster.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/product/addNewProduct/api/ProductMaster.js.map","sourceFileName":"imports/dashboard/product/addNewProduct/api/ProductMaster.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"ProductMaster"},"ignored":false,"code":"module.export({\n    Product: () => Product\n});\nlet Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n    Meteor(v) {\n        Meteor = v;\n    }\n\n}, 0);\nlet Mongo;\nmodule.watch(require(\"meteor/mongo\"), {\n    Mongo(v) {\n        Mongo = v;\n    }\n\n}, 1);\nlet Session;\nmodule.watch(require(\"meteor/session\"), {\n    Session(v) {\n        Session = v;\n    }\n\n}, 2);\nconst Product = new Mongo.Collection(\"product\");\n\nif (Meteor.isServer) {\n    let ProductImage;\n    module.watch(require(\"/imports/dashboard/product/addNewProduct/imageUploadServer/ProductImage.js\"), {\n        ProductImage(v) {\n            ProductImage = v;\n        }\n\n    }, 3);\n    Meteor.publish(\"productPublish\", function () {\n        return Product.find({});\n    });\n    Meteor.publish('productImagePublish', function () {\n        return ProductImage.find().cursor;\n    });\n    Meteor.methods({\n        'addProductImages': function (id, productId) {\n            var data = ProductImage.findOne({\n                \"_id\": id\n            });\n            var productData = Product.findOne({\n                \"_id\": productId\n            });\n\n            if (data && productData) {\n                var link = data.link(); // var obj = {\n                //     \"imageIndex\"    : productData.productImage.length,\n                //     \"imageLink\"     : link,\n                // }\n\n                Product.update({\n                    \"_id\": productId\n                }, {\n                    $push: {\n                        \"productImage\": link\n                    }\n                });\n            }\n        },\n        'addNewProduct': function (formValues) {\n            var productInsert = Product.insert({\n                \"category\": formValues.category,\n                \"subCategory\": formValues.subCategory,\n                \"brand\": formValues.brand,\n                \"productCode\": formValues.productCode,\n                \"productName\": formValues.productName,\n                \"productUrl\": formValues.productUrl,\n                \"supplierCode\": formValues.supplierCode,\n                \"productDetails\": formValues.productDetails,\n                \"materialNCare\": formValues.materialNCare,\n                \"shortDescription\": formValues.shortDescription,\n                \"dimensions\": formValues.dimensions,\n                \"productImage\": [],\n                \"status\": formValues.status,\n                \"dateAdded\": new Date(),\n                \"featured\": formValues.featured,\n                \"exclusive\": formValues.exclusive\n            }, (error, result) => {\n                if (error) {\n                    return error;\n                }\n\n                if (result) {\n                    return result;\n                }\n            });\n            return productInsert;\n        },\n        'updateOldProduct': function (formValues, productId) {\n            var productUpdate = Product.update({\n                \"_id\": productId\n            }, {\n                $set: {\n                    \"category\": formValues.category,\n                    \"subCategory\": formValues.subCategory,\n                    \"brand\": formValues.brand,\n                    \"productCode\": formValues.productCode,\n                    \"productName\": formValues.productName,\n                    \"productUrl\": formValues.productUrl,\n                    \"supplierCode\": formValues.supplierCode,\n                    \"productDetails\": formValues.productDetails,\n                    \"materialNCare\": formValues.materialNCare,\n                    \"shortDescription\": formValues.shortDescription,\n                    \"dimensions\": formValues.dimensions,\n                    \"productImage\": formValues.productImage,\n                    \"status\": formValues.status,\n                    \"featured\": formValues.featured,\n                    \"exclusive\": formValues.exclusive\n                }\n            });\n            return productUpdate;\n        },\n        'updateProductFeatured': function (productId, statusVal) {\n            var productUpdate = Product.update({\n                \"_id\": productId\n            }, {\n                $set: {\n                    \"featured\": statusVal\n                }\n            });\n            return productUpdate;\n        },\n        'updateProductExclusive': function (productId, statusVal) {\n            var productUpdate = Product.update({\n                \"_id\": productId\n            }, {\n                $set: {\n                    \"exclusive\": statusVal\n                }\n            });\n            return productUpdate;\n        },\n        'updateProductStatus': function (productId, statusVal) {\n            var productUpdate = Product.update({\n                \"_id\": productId\n            }, {\n                $set: {\n                    \"status\": statusVal\n                }\n            });\n            return productUpdate;\n        },\n        'deleteListProduct': function (id) {\n            Product.remove(id);\n            return id;\n        },\n        'deleteProductImage': function (productId, ProductImgLink) {\n            Product.update({\n                \"_id\": productId,\n                \"productImage\": ProductImgLink\n            }, {\n                $unset: {\n                    \"productImage.$\": 1\n                }\n            });\n            Product.update({\n                \"_id\": productId\n            }, {\n                $pull: {\n                    \"productImage\": null\n                }\n            });\n        },\n        'addNewBulkProduct': function (formValues) {\n            var productData = Product.findOne({\n                \"productCode\": formValues.productCode\n            });\n\n            if (productData) {\n                var arraylen = productData.dimensions.length + 1;\n                formValues.dimensions.index = arraylen - 1;\n                var productUpdate = Product.update({\n                    \"productCode\": formValues.productCode\n                }, {\n                    $push: {\n                        \"dimensions\": formValues.dimensions\n                    }\n                });\n                return productUpdate;\n            } else {\n                formValues.dimensions.index = 0;\n                var productInsert = Product.insert({\n                    \"category\": formValues.category,\n                    \"subCategory\": formValues.subCategory,\n                    \"brand\": formValues.brand,\n                    \"productCode\": formValues.productCode,\n                    \"productName\": formValues.productName,\n                    \"productUrl\": formValues.productUrl,\n                    \"supplierCode\": formValues.supplierCode,\n                    \"productDetails\": formValues.productDetails,\n                    \"materialNCare\": formValues.materialNCare,\n                    \"shortDescription\": formValues.shortDescription,\n                    \"dimensions\": [formValues.dimensions],\n                    \"productImage\": [],\n                    \"status\": formValues.status,\n                    \"dateAdded\": new Date(),\n                    \"featured\": formValues.featured,\n                    \"exclusive\": formValues.exclusive\n                }, (error, result) => {\n                    if (error) {\n                        return error;\n                    }\n\n                    if (result) {\n                        return result;\n                    }\n                });\n                return productInsert;\n            }\n        },\n        'BulkProductCSVUpload': function (csvObject) {\n            if (csvObject) {\n                for (i = 0; i < csvObject.length; i++) {\n                    var obj = {\n                        // \"index\"     : 0,\n                        \"color\": csvObject[i].color,\n                        \"size\": csvObject[i].size,\n                        \"unit\": csvObject[i].unit,\n                        \"price\": csvObject[i].price,\n                        \"quantity\": csvObject[i].quantity,\n                        \"discount\": csvObject[i].discount,\n                        \"reorder\": csvObject[i].reorder,\n                        \"saftyStock\": csvObject[i].saftyStock\n                    };\n                    formValues = {\n                        \"category\": csvObject[i].category,\n                        \"subCategory\": csvObject[i].subCategory,\n                        \"brand\": csvObject[i].brand,\n                        \"productCode\": csvObject[i].productCode,\n                        \"productName\": csvObject[i].productName,\n                        \"productUrl\": csvObject[i].productUrl,\n                        \"supplierCode\": csvObject[i].supplierCode,\n                        \"productDetails\": csvObject[i].productDetails,\n                        \"materialNCare\": csvObject[i].materialNCare,\n                        \"shortDescription\": csvObject[i].shortDescription,\n                        \"dimensions\": obj,\n                        \"status\": 'Unpublish',\n                        \"featured\": false,\n                        \"exclusive\": false\n                    };\n                    UserSession.set(\"allProgressbarSession\", csvObject.length, Meteor.userId());\n                    Meteor.call(\"addNewBulkProduct\", formValues, (error, result) => {\n                        if (error) {} else {\n                            UserSession.set(\"progressbarSession\", i, Meteor.userId());\n                        }\n                    });\n                }\n\n                return true;\n            }\n        }\n    });\n}","map":{"version":3,"sources":["imports/dashboard/product/addNewProduct/api/ProductMaster.js"],"names":["module","export","Product","Meteor","watch","require","v","Mongo","Session","Collection","isServer","ProductImage","publish","find","cursor","methods","id","productId","data","findOne","productData","link","update","$push","formValues","productInsert","insert","category","subCategory","brand","productCode","productName","productUrl","supplierCode","productDetails","materialNCare","shortDescription","dimensions","status","Date","featured","exclusive","error","result","productUpdate","$set","productImage","statusVal","remove","ProductImgLink","$unset","$pull","arraylen","length","index","csvObject","i","obj","color","size","unit","price","quantity","discount","reorder","saftyStock","UserSession","set","userId","call"],"mappings":"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","file":"imports/dashboard/product/addNewProduct/api/ProductMaster.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Session } from 'meteor/session';\n\nexport const Product = new Mongo.Collection(\"product\");\n\nif(Meteor.isServer){\n    // import { ProductImage } from './ProductImage.js';\n    import { ProductImage } from '/imports/dashboard/product/addNewProduct/imageUploadServer/ProductImage.js';\n\n\n    Meteor.publish(\"productPublish\", function(){\n        return Product.find({});\n    });\n\n    Meteor.publish('productImagePublish', function() {\n       return ProductImage.find().cursor;\n   });\n\nMeteor.methods({\n    'addProductImages': function(id, productId){\n        var data = ProductImage.findOne({\"_id\":id});\n        var productData = Product.findOne({\"_id\":productId});\n        if(data && productData){\n            var link = data.link();\n            // var obj = {\n            //     \"imageIndex\"    : productData.productImage.length,\n            //     \"imageLink\"     : link,\n            // }\n            Product.update(\n                {\"_id\":productId},\n                {$push: {\n                            \"productImage\" : link,\n                        }\n                },\n            );\n        }\n\n    },\n\n    'addNewProduct': function(formValues){\n        var productInsert = Product.insert({\n                                \"category\"          :   formValues.category,\n                                \"subCategory\"       :   formValues.subCategory,\n                                \"brand\"             :   formValues.brand,\n                                \"productCode\"       :   formValues.productCode,\n                                \"productName\"       :   formValues.productName,\n                                \"productUrl\"        :   formValues.productUrl,\n                                \"supplierCode\"      :   formValues.supplierCode,\n                                \"productDetails\"    :   formValues.productDetails,\n                                \"materialNCare\"     :   formValues.materialNCare,\n                                \"shortDescription\"  :   formValues.shortDescription,\n                                \"dimensions\"        :   formValues.dimensions,\n                                \"productImage\"      :   [],\n                                \"status\"            :   formValues.status,\n                                \"dateAdded\"         :   new Date(),\n                                \"featured\"          :   formValues.featured,\n                                \"exclusive\"         :   formValues.exclusive,\n                            },(error,result) => {\n                    \t\t    if(error){\n                                    return error;\n                    \t        }\n                                if(result){\n                                    return result;\n                                }\n                    \t\t});\n        return productInsert;\n    },\n    'updateOldProduct': function(formValues, productId){\n        var productUpdate = Product.update(\n            {\"_id\":productId},\n            {$set:  {\n                        \"category\"          :   formValues.category,\n                        \"subCategory\"       :   formValues.subCategory,\n                        \"brand\"             :   formValues.brand,\n                        \"productCode\"       :   formValues.productCode,\n                        \"productName\"       :   formValues.productName,\n                        \"productUrl\"        :   formValues.productUrl,\n                        \"supplierCode\"      :   formValues.supplierCode,\n                        \"productDetails\"    :   formValues.productDetails,\n                        \"materialNCare\"     :   formValues.materialNCare,\n                        \"shortDescription\"  :   formValues.shortDescription,\n                        \"dimensions\"        :   formValues.dimensions,\n                        \"productImage\"      :   formValues.productImage,\n                        \"status\"            :   formValues.status,\n                        \"featured\"          :   formValues.featured,\n                        \"exclusive\"         :   formValues.exclusive,\n                    }\n            }\n        );\n        return productUpdate;\n    },\n\n    'updateProductFeatured': function(productId, statusVal){\n        var productUpdate = Product.update(\n            {\"_id\":productId},\n            {$set:  {\n                        \"featured\"          :   statusVal,\n                    }\n            }\n        );\n        return productUpdate;\n    },\n\n\n    'updateProductExclusive': function(productId, statusVal){\n        var productUpdate = Product.update(\n            {\"_id\":productId},\n            {$set:  {\n                        \"exclusive\"         :   statusVal,\n                    }\n            }\n        );\n        return productUpdate;\n    },\n\n    'updateProductStatus': function(productId, statusVal){\n        var productUpdate = Product.update(\n            {\"_id\":productId},\n            {$set:  {\n                        \"status\"         :   statusVal,\n                    }\n            }\n        );\n        return productUpdate;\n    },\n\n    'deleteListProduct': function(id){\n        Product.remove(id);\n        return id;\n    },\n    'deleteProductImage': function(productId, ProductImgLink){\n       \n        Product.update(\n            {\"_id\":productId,\"productImage\":ProductImgLink},\n            {$unset:\n                {\"productImage.$\" : 1,}\n            }\n        );\n\n        Product.update(\n            {\"_id\":productId},\n            {$pull:\n                {\"productImage\" : null,}\n            }\n        );\n    },\n\n    'addNewBulkProduct': function(formValues){\n        var productData = Product.findOne({\"productCode\":formValues.productCode});\n        if(productData){\n            var arraylen = productData.dimensions.length+1;\n            formValues.dimensions.index = arraylen-1;\n\n            var productUpdate = Product.update(\n                {\"productCode\":formValues.productCode},\n                {$push: {\n                            \"dimensions\" : formValues.dimensions,\n                        }\n                },\n            );\n            return productUpdate;\n        }else {\n            formValues.dimensions.index = 0;\n            var productInsert = Product.insert({\n                                    \"category\"          :   formValues.category,\n                                    \"subCategory\"       :   formValues.subCategory,\n                                    \"brand\"             :   formValues.brand,\n                                    \"productCode\"       :   formValues.productCode,\n                                    \"productName\"       :   formValues.productName,\n                                    \"productUrl\"        :   formValues.productUrl,\n                                    \"supplierCode\"      :   formValues.supplierCode,\n                                    \"productDetails\"    :   formValues.productDetails,\n                                    \"materialNCare\"     :   formValues.materialNCare,\n                                    \"shortDescription\"  :   formValues.shortDescription,\n                                    \"dimensions\"        :   [formValues.dimensions],\n                                    \"productImage\"      :   [],\n                                    \"status\"            :   formValues.status,\n                                    \"dateAdded\"         :   new Date(),\n                                    \"featured\"          :   formValues.featured,\n                                    \"exclusive\"         :   formValues.exclusive,\n                                },(error,result) => {\n                        \t\t    if(error){\n                                        return error;\n                        \t        }\n                                    if(result){\n                                        return result;\n                                    }\n                        \t\t});\n            return productInsert;\n        }\n    },\n\n    'BulkProductCSVUpload': function(csvObject){\n        if(csvObject){\n            for(i=0;i<csvObject.length;i++){\n                var obj = {\n                    // \"index\"     : 0,\n                    \"color\"     : csvObject[i].color,\n                    \"size\"      : csvObject[i].size,\n                    \"unit\"      : csvObject[i].unit,\n                    \"price\"     : csvObject[i].price,\n                    \"quantity\"  : csvObject[i].quantity,\n                    \"discount\"  : csvObject[i].discount,\n                    \"reorder\"   : csvObject[i].reorder,\n                    \"saftyStock\": csvObject[i].saftyStock,\n                };\n\n                formValues = {\n                    \"category\"          :   csvObject[i].category,\n                    \"subCategory\"       :   csvObject[i].subCategory,\n                    \"brand\"             :   csvObject[i].brand,\n                    \"productCode\"       :   csvObject[i].productCode,\n                    \"productName\"       :   csvObject[i].productName,\n                    \"productUrl\"        :   csvObject[i].productUrl,\n                    \"supplierCode\"      :   csvObject[i].supplierCode,\n                    \"productDetails\"    :   csvObject[i].productDetails,\n                    \"materialNCare\"     :   csvObject[i].materialNCare,\n                    \"shortDescription\"  :   csvObject[i].shortDescription,\n                    \"dimensions\"        :   obj,\n                    \"status\"            :   'Unpublish',\n                    \"featured\"          :   false,\n                    \"exclusive\"         :   false,\n                }\n\n                UserSession.set(\"allProgressbarSession\", csvObject.length, Meteor.userId());\n                Meteor.call(\"addNewBulkProduct\",formValues, (error, result)=>{\n                    if(error){\n\n                    }else {\n                        UserSession.set(\"progressbarSession\", i, Meteor.userId());\n                    }\n                });\n            }\n            return true;\n        }\n    },\n\n\n});\n}\n"]},"hash":"b5d8e36e33b91e754e99f81c7ecf2668aa9d086c"}
