{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/mongo","imported":["Mongo"],"specifiers":[{"kind":"named","imported":"Mongo","local":"Mongo"}]},{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-dom","imported":["render"],"specifiers":[{"kind":"named","imported":"render","local":"render"}]},{"source":"meteor/ultimatejs:tracker-react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TrackerReact"}]},{"source":"meteor/react-meteor-data","imported":["createContainer"],"specifiers":[{"kind":"named","imported":"createContainer","local":"createContainer"}]},{"source":"react-validation","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Validation"}]},{"source":"validator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"validator"}]},{"source":"meteor/tracker","imported":["Tracker"],"specifiers":[{"kind":"named","imported":"Tracker","local":"Tracker"}]},{"source":"react-router","imported":["browserHistory"],"specifiers":[{"kind":"named","imported":"browserHistory","local":"browserHistory"}]},{"source":"/imports/dashboard/product/addNewProduct/api/ProductMaster.js","imported":["Product"],"specifiers":[{"kind":"named","imported":"Product","local":"Product"}]},{"source":"/imports/dashboard/product/addNewProduct/api/projectSettings.js","imported":["ProjectSettings"],"specifiers":[{"kind":"named","imported":"ProjectSettings","local":"ProjectSettings"}]}],"exports":{"exported":["AddNewProductImages"],"specifiers":[{"kind":"local","local":"AddNewProductImages","exported":"default"}]}}},"options":{"filename":"imports/dashboard/product/addNewProduct/component/AddNewProductImages.jsx","filenameRelative":"imports/dashboard/product/addNewProduct/component/AddNewProductImages.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/dashboard/product/addNewProduct/component/AddNewProductImages.jsx.map","sourceFileName":"imports/dashboard/product/addNewProduct/component/AddNewProductImages.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AddNewProductImages"},"ignored":false,"code":"module.export({\n    default: () => AddNewProductImages\n});\nlet Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n    Meteor(v) {\n        Meteor = v;\n    }\n\n}, 0);\nlet Mongo;\nmodule.watch(require(\"meteor/mongo\"), {\n    Mongo(v) {\n        Mongo = v;\n    }\n\n}, 1);\nlet React, Component;\nmodule.watch(require(\"react\"), {\n    default(v) {\n        React = v;\n    },\n\n    Component(v) {\n        Component = v;\n    }\n\n}, 2);\nlet render;\nmodule.watch(require(\"react-dom\"), {\n    render(v) {\n        render = v;\n    }\n\n}, 3);\nlet TrackerReact;\nmodule.watch(require(\"meteor/ultimatejs:tracker-react\"), {\n    default(v) {\n        TrackerReact = v;\n    }\n\n}, 4);\nlet createContainer;\nmodule.watch(require(\"meteor/react-meteor-data\"), {\n    createContainer(v) {\n        createContainer = v;\n    }\n\n}, 5);\nlet Validation;\nmodule.watch(require(\"react-validation\"), {\n    default(v) {\n        Validation = v;\n    }\n\n}, 6);\nlet validator;\nmodule.watch(require(\"validator\"), {\n    default(v) {\n        validator = v;\n    }\n\n}, 7);\nlet Tracker;\nmodule.watch(require(\"meteor/tracker\"), {\n    Tracker(v) {\n        Tracker = v;\n    }\n\n}, 8);\nlet browserHistory;\nmodule.watch(require(\"react-router\"), {\n    browserHistory(v) {\n        browserHistory = v;\n    }\n\n}, 9);\nlet Product;\nmodule.watch(require(\"/imports/dashboard/product/addNewProduct/api/ProductMaster.js\"), {\n    Product(v) {\n        Product = v;\n    }\n\n}, 10);\nlet ProjectSettings;\nmodule.watch(require(\"/imports/dashboard/product/addNewProduct/api/projectSettings.js\"), {\n    ProjectSettings(v) {\n        ProjectSettings = v;\n    }\n\n}, 11);\n\nclass AddNewProductImages extends TrackerReact(Component) {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"allProductIamges\": []\n        };\n    }\n\n    componentWillReceiveProps(nextProps) {}\n\n    componentDidMount() {\n        Meteor.subscribe(\"productImagePublish\");\n        Meteor.subscribe(\"productPublish\");\n        Meteor.subscribe(\"projectSettingsPublish\");\n\n        if (!$(\"#adminLte\").length > 0 && !$('body').hasClass('adminLte')) {\n            var adminLte = document.createElement(\"script\");\n            adminLte.type = \"text/javascript\";\n            adminLte.src = \"/js/adminLte.js\";\n            adminLte.setAttribute('id', 'adminLte');\n            $(\"body\").append(adminLte);\n        }\n    }\n\n    componentWillUnmount() {}\n\n    uploadCategoryImage(event) {\n        event.preventDefault();\n        let self = this;\n\n        if (event.currentTarget.files && event.currentTarget.files[0]) {\n            var file = event.currentTarget.files[0];\n\n            if (file) {\n                var productId = this.props.params.id;\n                addCategoryImgsToS3Function(file, self, productId);\n            }\n        }\n    }\n\n    getProductImages() {\n        var productId = this.props.params.id;\n        var imageData = Product.findOne({\n            \"_id\": productId\n        });\n        console.log(\"productId: \", productId);\n        console.log(\"imageData: \", imageData);\n\n        if (imageData) {\n            if (imageData.productImage) {\n                return imageData.productImage;\n            }\n        } else {\n            return [];\n        }\n    }\n\n    saveProductImages(event) {\n        event.preventDefault();\n        var path = \"/admin/products/ProductList/\";\n        browserHistory.replace(path);\n        window.scrollTo(0, 0);\n    }\n\n    deleteProductImage(event) {\n        var productid = this.props.params.id;\n        var imageUrl = $(event.currentTarget).attr(\"data-imageUrl\"); // var imageIndex = $(event.currentTarget).attr(\"data-imageIndex\");\n        // console.log(\"imageUrl: \",imageUrl);\n        // console.log(\"imageIndex: \",imageIndex);\n\n        console.log(\"productid: \", productid);\n\n        if (productid && imageUrl) {\n            Meteor.call('deleteProductImage', productid, imageUrl);\n        }\n    }\n\n    render() {\n        return React.createElement(\n            \"div\",\n            {\n                className: \"content-wrapper\"\n            },\n            React.createElement(\n                \"section\",\n                {\n                    className: \"content-header\"\n                },\n                React.createElement(\n                    \"h1\",\n                    null,\n                    \"Dashboard\",\n                    React.createElement(\n                        \"small\",\n                        null,\n                        \"Version 3.0\"\n                    )\n                ),\n                React.createElement(\n                    \"ol\",\n                    {\n                        className: \"breadcrumb\"\n                    },\n                    React.createElement(\n                        \"li\",\n                        null,\n                        React.createElement(\n                            \"a\",\n                            {\n                                href: \"#\"\n                            },\n                            React.createElement(\"i\", {\n                                className: \"fa fa-dashboard\"\n                            }),\n                            \" Home\"\n                        )\n                    ),\n                    React.createElement(\n                        \"li\",\n                        {\n                            className: \"active\"\n                        },\n                        \"Add Product Images\"\n                    )\n                )\n            ),\n            React.createElement(\n                \"section\",\n                {\n                    className: \"content\"\n                },\n                React.createElement(\n                    \"div\",\n                    {\n                        className: \"row\"\n                    },\n                    React.createElement(\n                        \"div\",\n                        {\n                            className: \"col-md-12\"\n                        },\n                        React.createElement(\n                            \"div\",\n                            {\n                                className: \"box\"\n                            },\n                            React.createElement(\n                                \"div\",\n                                {\n                                    className: \"box-header with-border\"\n                                },\n                                React.createElement(\n                                    \"h3\",\n                                    {\n                                        className: \"box-title\"\n                                    },\n                                    \"Add Product Images\"\n                                ),\n                                React.createElement(\n                                    \"div\",\n                                    {\n                                        className: \"box-tools pull-right\"\n                                    },\n                                    React.createElement(\n                                        \"button\",\n                                        {\n                                            type: \"button\",\n                                            className: \"btn btn-box-tool btn-minus\",\n                                            \"data-widget\": \"collapse\"\n                                        },\n                                        React.createElement(\"i\", {\n                                            className: \"fa fa-minus\"\n                                        })\n                                    ),\n                                    React.createElement(\n                                        \"div\",\n                                        {\n                                            className: \"btn-group\"\n                                        },\n                                        React.createElement(\n                                            \"button\",\n                                            {\n                                                type: \"button\",\n                                                className: \"btn btn-box-tool dropdown-toggle\",\n                                                \"data-toggle\": \"dropdown\"\n                                            },\n                                            React.createElement(\"i\", {\n                                                className: \"fa fa-wrench\"\n                                            })\n                                        ),\n                                        React.createElement(\n                                            \"ul\",\n                                            {\n                                                className: \"dropdown-menu\",\n                                                role: \"menu\"\n                                            },\n                                            React.createElement(\n                                                \"li\",\n                                                null,\n                                                React.createElement(\n                                                    \"a\",\n                                                    {\n                                                        href: \"#\"\n                                                    },\n                                                    \"Action\"\n                                                )\n                                            ),\n                                            React.createElement(\n                                                \"li\",\n                                                null,\n                                                React.createElement(\n                                                    \"a\",\n                                                    {\n                                                        href: \"#\"\n                                                    },\n                                                    \"Another action \"\n                                                )\n                                            ),\n                                            React.createElement(\n                                                \"li\",\n                                                null,\n                                                React.createElement(\n                                                    \"a\",\n                                                    {\n                                                        href: \"#\"\n                                                    },\n                                                    \"Something else here\"\n                                                )\n                                            ),\n                                            React.createElement(\"li\", {\n                                                className: \"divider\"\n                                            }),\n                                            React.createElement(\n                                                \"li\",\n                                                null,\n                                                React.createElement(\n                                                    \"a\",\n                                                    {\n                                                        href: \"#\"\n                                                    },\n                                                    \"Separated link\"\n                                                )\n                                            )\n                                        )\n                                    ),\n                                    React.createElement(\n                                        \"button\",\n                                        {\n                                            type: \"button\",\n                                            className: \"btn btn-box-tool btn-minus\",\n                                            \"data-widget\": \"remove\"\n                                        },\n                                        React.createElement(\"i\", {\n                                            className: \"fa fa-times\"\n                                        })\n                                    )\n                                )\n                            ),\n                            React.createElement(\n                                \"div\",\n                                {\n                                    className: \"box-body\"\n                                },\n                                React.createElement(\n                                    \"div\",\n                                    {\n                                        className: \"row\"\n                                    },\n                                    React.createElement(\n                                        \"div\",\n                                        {\n                                            className: \"col-md-12\"\n                                        },\n                                        React.createElement(\n                                            \"label\",\n                                            null,\n                                            \"Product Image\"\n                                        ),\n                                        React.createElement(\n                                            \"div\",\n                                            {\n                                                className: \"input-group\"\n                                            },\n                                            React.createElement(\n                                                \"span\",\n                                                {\n                                                    className: \"input-group-addon\",\n                                                    id: \"basic-addon1\"\n                                                },\n                                                React.createElement(\"i\", {\n                                                    className: \"fa fa-file-image-o\",\n                                                    \"aria-hidden\": \"true\"\n                                                })\n                                            ),\n                                            React.createElement(\n                                                \"div\",\n                                                {\n                                                    \"aria-describedby\": \"basic-addon1\"\n                                                },\n                                                React.createElement(\"input\", {\n                                                    type: \"file\",\n                                                    className: \"form-control\",\n                                                    onChange: this.uploadCategoryImage.bind(this)\n                                                })\n                                            )\n                                        )\n                                    ),\n                                    React.createElement(\n                                        \"div\",\n                                        {\n                                            className: \"col-lg-12\"\n                                        },\n                                        React.createElement(\n                                            \"div\",\n                                            {\n                                                className: \"row productImgWrapper\"\n                                            },\n                                            this.getProductImages().map((imageData, index) => {\n                                                return React.createElement(\n                                                    \"div\",\n                                                    {\n                                                        className: \"col-lg-4 productImgCol\",\n                                                        key: index\n                                                    },\n                                                    React.createElement(\n                                                        \"div\",\n                                                        {\n                                                            className: \"prodImage\"\n                                                        },\n                                                        React.createElement(\n                                                            \"div\",\n                                                            {\n                                                                className: \"prodImageInner\"\n                                                            },\n                                                            React.createElement(\n                                                                \"span\",\n                                                                {\n                                                                    className: \"prodImageCross\",\n                                                                    title: \"Delete\",\n                                                                    \"data-imageUrl\": imageData,\n                                                                    onClick: this.deleteProductImage.bind(this)\n                                                                },\n                                                                \"x\"\n                                                            )\n                                                        ),\n                                                        React.createElement(\"img\", {\n                                                            src: imageData,\n                                                            alt: \"Product Image\",\n                                                            className: \"img-responsive\"\n                                                        })\n                                                    )\n                                                );\n                                            })\n                                        )\n                                    ),\n                                    React.createElement(\n                                        \"div\",\n                                        {\n                                            className: \"col-lg-12\"\n                                        },\n                                        React.createElement(\n                                            \"div\",\n                                            {\n                                                className: \"saveProductImages\",\n                                                onClick: this.saveProductImages.bind(this)\n                                            },\n                                            \"SAVE\"\n                                        )\n                                    )\n                                )\n                            )\n                        )\n                    )\n                )\n            )\n        );\n    }\n\n}","map":{"version":3,"sources":["imports/dashboard/product/addNewProduct/component/AddNewProductImages.jsx"],"names":["module","export","default","AddNewProductImages","Meteor","watch","require","v","Mongo","React","Component","render","TrackerReact","createContainer","Validation","validator","Tracker","browserHistory","Product","ProjectSettings","constructor","props","state","componentWillReceiveProps","nextProps","componentDidMount","subscribe","$","length","hasClass","adminLte","document","createElement","type","src","setAttribute","append","componentWillUnmount","uploadCategoryImage","event","preventDefault","self","currentTarget","files","file","productId","params","id","addCategoryImgsToS3Function","getProductImages","imageData","findOne","console","log","productImage","saveProductImages","path","replace","window","scrollTo","deleteProductImage","productid","imageUrl","attr","call","bind","map","index"],"mappings":"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","file":"imports/dashboard/product/addNewProduct/component/AddNewProductImages.jsx.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport TrackerReact from 'meteor/ultimatejs:tracker-react';\nimport { createContainer } from 'meteor/react-meteor-data';\nimport Validation from 'react-validation';\nimport validator from 'validator';\nimport {Tracker} from 'meteor/tracker';\nimport { browserHistory } from 'react-router';\n\nimport { Product } from '/imports/dashboard/product/addNewProduct/api/ProductMaster.js';\nimport { ProjectSettings } from '/imports/dashboard/product/addNewProduct/api/projectSettings.js';\n\n\n\nexport default class AddNewProductImages extends TrackerReact (Component){\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            \"allProductIamges\": [],\n        }\n\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n\n    }\n\n    componentDidMount() {\n        Meteor.subscribe(\"productImagePublish\");\n        Meteor.subscribe(\"productPublish\");\n        Meteor.subscribe(\"projectSettingsPublish\");\n\n\n        if (!$(\"#adminLte\").length>0 && !$('body').hasClass('adminLte')) {\n          var adminLte = document.createElement(\"script\");\n          adminLte.type = \"text/javascript\";\n          adminLte.src = \"/js/adminLte.js\";\n          adminLte.setAttribute('id','adminLte');\n          $(\"body\").append(adminLte);\n        }\n\n    }\n\n    componentWillUnmount() {\n\n    }\n\n    uploadCategoryImage(event){\n        event.preventDefault();\n        let self = this;\n        if (event.currentTarget.files && event.currentTarget.files[0]) {\n            var file = event.currentTarget.files[0];\n            if (file) {\n                var productId = this.props.params.id;\n                addCategoryImgsToS3Function(file,self, productId);\n            }\n        }\n    }\n\n    getProductImages(){\n        var productId = this.props.params.id;\n\n        var imageData = Product.findOne({\"_id\":productId});\n        console.log(\"productId: \",productId);\n\n        console.log(\"imageData: \",imageData);\n        if(imageData){\n            if(imageData.productImage){\n                return imageData.productImage;\n            }\n        }else {\n            return [];\n        }\n    }\n\n\n    saveProductImages(event){\n        event.preventDefault();\n        var path = \"/admin/products/ProductList/\";\n        browserHistory.replace(path);\n        window.scrollTo(0,0);\n\n    }\n\n\n    deleteProductImage(event){\n        var productid = this.props.params.id;\n        var imageUrl = $(event.currentTarget).attr(\"data-imageUrl\");\n        // var imageIndex = $(event.currentTarget).attr(\"data-imageIndex\");\n        // console.log(\"imageUrl: \",imageUrl);\n        // console.log(\"imageIndex: \",imageIndex);\n        console.log(\"productid: \",productid);\n        if(productid && imageUrl){\n            Meteor.call('deleteProductImage', productid, imageUrl);\n        }\n\n    }\n\n    render(){\n        return(\n            <div className=\"content-wrapper\">\n                {/* Content Header (Page header) */}\n                <section className=\"content-header\">\n                    <h1>Dashboard\n                        <small>Version 3.0</small>\n                    </h1>\n                    <ol className=\"breadcrumb\">\n                        <li>\n                            <a href=\"#\"><i className=\"fa fa-dashboard\" /> Home</a></li>\n                            <li className=\"active\">Add Product Images</li>\n                        </ol>\n                    </section>\n                    {/* Main content */}\n                    <section className=\"content\">\n                        <div className=\"row\">\n                            <div className=\"col-md-12\">\n                                <div className=\"box\">\n                                    <div className=\"box-header with-border\">\n                                        <h3 className=\"box-title\">\n                                            Add Product Images\n                                        </h3>\n                                        <div className=\"box-tools pull-right\">\n                                            <button type=\"button\" className=\"btn btn-box-tool btn-minus\" data-widget=\"collapse\">\n                                                <i className=\"fa fa-minus\" />\n                                            </button>\n                                            <div className=\"btn-group\">\n                                                <button type=\"button\" className=\"btn btn-box-tool dropdown-toggle\" data-toggle=\"dropdown\">\n                                                    <i className=\"fa fa-wrench\" /></button>\n                                                    <ul className=\"dropdown-menu\" role=\"menu\">\n                                                        <li>\n                                                            <a href=\"#\">Action</a>\n                                                        </li>\n                                                        <li>\n                                                            <a href=\"#\">Another action </a>\n                                                        </li>\n                                                        <li>\n                                                            <a href=\"#\">Something else here</a>\n                                                        </li>\n                                                        <li className=\"divider\" />\n                                                        <li>\n                                                            <a href=\"#\">\n                                                                Separated link\n                                                            </a>\n                                                        </li>\n                                                    </ul>\n                                                </div>\n                                                <button type=\"button\" className=\"btn btn-box-tool btn-minus\" data-widget=\"remove\">\n                                                    <i className=\"fa fa-times\" />\n                                                </button>\n                                            </div>\n                                        </div>\n\n                                        {/* /.box-header */}\n                                        <div className=\"box-body\">\n                                            <div className=\"row\">\n                                                <div className=\"col-md-12\">\n                                                    <label>Product Image</label>\n                                                    <div className=\"input-group\">\n                                                        <span className=\"input-group-addon\" id=\"basic-addon1\"><i className=\"fa fa-file-image-o\" aria-hidden=\"true\"></i></span>\n                                                        <div aria-describedby=\"basic-addon1\">\n                                                            <input type=\"file\" className=\"form-control\" onChange={this.uploadCategoryImage.bind(this)} />\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"col-lg-12\">\n                                                    <div className=\"row productImgWrapper\">\n                                                    {\n                                                        this.getProductImages().map((imageData, index)=>{\n                                                            return(\n                                                                <div className=\"col-lg-4 productImgCol\" key={index}>\n                                                                    <div className=\"prodImage\">\n                                                                        <div className=\"prodImageInner\">\n                                                                            <span className=\"prodImageCross\" title=\"Delete\" data-imageUrl={imageData} onClick={this.deleteProductImage.bind(this)}>x</span>\n                                                                        </div>\n                                                                        <img src={imageData} alt=\"Product Image\" className=\"img-responsive\" />\n                                                                        {/* {data.imageLink} */}\n\n                                                                    </div>\n                                                                </div>\n                                                            );\n                                                        })\n                                                    }\n                                                    </div>\n                                                </div>\n                                                <div className=\"col-lg-12\">\n                                                    <div className=\"saveProductImages\" onClick={this.saveProductImages.bind(this)} >\n                                                        SAVE\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n\n\n\n        );\n    }\n}\n"]},"hash":"269a7a0457a63c5919251a7e0383a8fc1d48475d"}
